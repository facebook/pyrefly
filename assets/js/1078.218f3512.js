"use strict";(globalThis.webpackChunknew_website=globalThis.webpackChunknew_website||[]).push([[1078],{71078(e,n,t){t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>r,toc:()=>d});var r=t(98124),o=t(74848),i=t(28453);const s={title:"Pyrefly Beta is here!",description:"Pyrefly v0.42.0 marks the first beta release of Pyrefly.",slug:"pyrefly-beta",authors:["pyreflyteam"],tags:["news","typechecking","IDE"],image:"https://pyrefly.org/assets/images/release-news-d289bbc4c41029b55f21ed9165321bf5.png",hide_table_of_contents:!1,toc_max_heading_level:4},a=void 0,l={authorsImageUrls:[void 0]},d=[{value:"\ud83d\ude80 The IDE Experience: Battle-Tested at Meta Scale",id:"-the-ide-experience-battle-tested-at-meta-scale",level:2},{value:"<strong>Automatic import refactoring</strong>",id:"automatic-import-refactoring",level:4},{value:"<strong>Jupyter Notebook support</strong>",id:"jupyter-notebook-support",level:4},{value:"<strong>Third-party stubs shipped with the extension</strong>",id:"third-party-stubs-shipped-with-the-extension",level:4},{value:"Better Type checking? Check \u2705",id:"better-type-checking-check-",level:2},{value:"<strong>Type Inference</strong>",id:"type-inference",level:4},{value:"<strong>Type Narrowing</strong>",id:"type-narrowing",level:4},{value:"Preliminary Support for Pydantic and Django",id:"preliminary-support-for-pydantic-and-django",level:3},{value:"<strong>Django Support</strong>",id:"django-support",level:4},{value:"<strong>Pydantic Support</strong>",id:"pydantic-support",level:4},{value:"<strong>Dataclass Transforms Support</strong>",id:"dataclass-transforms-support",level:4},{value:"\ud83d\ude4c An improved user experience",id:"-an-improved-user-experience",level:2},{value:"<strong>Type Error Message Improvements</strong>",id:"type-error-message-improvements",level:4},{value:"<strong>Smoother migration from MyPy or Pyright</strong>",id:"smoother-migration-from-mypy-or-pyright",level:4},{value:"<strong>A more configurable IDE experience</strong>",id:"a-more-configurable-ide-experience",level:4},{value:"\ud83d\udd2c Enhancing Performance, Squashing Bugs and Aligning with the Spec",id:"-enhancing-performance-squashing-bugs-and-aligning-with-the-spec",level:2},{value:"What\u2019s Next?",id:"whats-next",level:2}];function c(e){const n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",hr:"hr",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:t(75474).A+"",width:"5334",height:"3000"})}),"\n",(0,o.jsx)(n.p,{children:"Today we\u2019re thrilled to announce that we have reached Beta status for Pyrefly, our open-source, high-performance tool for Python code navigation and type checking! We first announced Pyrefly back in April 2025, and thanks to incredible community feedback and a ton of work from our team, we\u2019ve hit a significant milestone."}),"\n",(0,o.jsxs)(n.p,{children:['But what does "Beta" mean for Pyrefly? This label can mean different things for different projects, for us it means we\u2019ve made significant steps towards ',(0,o.jsx)(n.a,{href:"https://github.com/facebook/pyrefly/milestones",children:"our goals"})," for stability and production readiness. We\u2019ll cover more of the specifics in this blog, but at a high level what this means is that when using a version of Pyrefly with Beta status (v0.42.0 or later) you can feel confident that:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"The IDE extension is ready for production use right now,"}),"\n",(0,o.jsx)(n.li,{children:"The core type-checking features are robust, with some edge cases that will be addressed as we make progress towards a later stable v1 release."}),"\n"]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"-the-ide-experience-battle-tested-at-meta-scale",children:"\ud83d\ude80 The IDE Experience: Battle-Tested at Meta Scale"}),"\n",(0,o.jsx)(n.p,{children:"A major priority for Pyrefly development since the beginning has been to deliver a lightning-fast and scalable IDE experience. Pyrefly was born out of a real-world production problem: Meta's Instagram developers were struggling with painfully slow code navigation, autocomplete, and type checking on their massive codebase."}),"\n",(0,o.jsxs)(n.p,{children:["Over the past year we\u2019ve been rapidly adding new features and addressing bugs found by our passionate community of alpha testers (both internal and external). We're now proud to say ",(0,o.jsx)(n.strong,{children:"Pyrefly is the default language server and type checker for all developers working on Instagram at Meta"}),". By testing Pyrefly\u2019s IDE extension on a codebase the size of Instagram we\u2019ve been able to deliver hotly requested features with confidence that they will be reliable for large production codebases."]}),"\n",(0,o.jsx)(n.p,{children:"A few examples of Pyrefly\u2019s latest language server features include:"}),"\n",(0,o.jsx)(n.h4,{id:"automatic-import-refactoring",children:(0,o.jsx)(n.strong,{children:"Automatic import refactoring"})}),"\n",(0,o.jsx)(n.p,{children:"Pyrefly will now automatically update your imports when you rename or move a file."}),"\n",(0,o.jsx)("video",{src:"/videos/IDE-file-rename.mp4",width:"720",muted:!0,loop:!0,autoPlay:!0,playsInline:!0,preload:"auto"}),"\n",(0,o.jsx)(n.h4,{id:"jupyter-notebook-support",children:(0,o.jsx)(n.strong,{children:"Jupyter Notebook support"})}),"\n",(0,o.jsx)(n.p,{children:"You can now use Pyrefly with Jupyter notebooks for diagnostics (red squiggles), inlay hints, go-to-definition, hover, semantic tokens, signature help, and completions."}),"\n",(0,o.jsx)("video",{src:"/videos/jupyter-notebook.mp4",width:"720",muted:!0,loop:!0,autoPlay:!0,playsInline:!0,preload:"auto"}),"\n",(0,o.jsx)(n.h4,{id:"third-party-stubs-shipped-with-the-extension",children:(0,o.jsx)(n.strong,{children:"Third-party stubs shipped with the extension"})}),"\n",(0,o.jsxs)(n.p,{children:["Language server features like hover and autocomplete are now available for third party libraries with Typeshed stubs. This support is available by default, without the need for a config file (",(0,o.jsx)(n.code,{children:"pyproject.toml"})," / ",(0,o.jsx)(n.code,{children:"pyrefly.toml"}),"), to provide a better out-of-the-box experience."]}),"\n",(0,o.jsx)("video",{src:"/videos/typeshed.mp4",width:"720",muted:!0,loop:!0,autoPlay:!0,playsInline:!0,preload:"auto"}),"\n",(0,o.jsxs)(n.p,{children:["For a full list of supported IDE features check out the ",(0,o.jsx)(n.a,{href:"https://pyrefly.org/en/docs/IDE-features/",children:"Pyrefly IDE documentation"}),"."]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"better-type-checking-check-",children:"Better Type checking? Check \u2705"}),"\n",(0,o.jsx)(n.p,{children:"We've also made steady progress in improving Pyrefly's core type-checking engine since the Alpha release. Our focus has been on achieving higher conformance with the Python Typing Specification while also reducing false positives and improving support for modern Python patterns and popular libraries. In this section we'll highlight a few examples of the key fixes, new features, and design decisions that have paved the way for a more reliable type-checking experience in this Beta release."}),"\n",(0,o.jsx)(n.h4,{id:"type-inference",children:(0,o.jsx)(n.strong,{children:"Type Inference"})}),"\n",(0,o.jsx)(n.p,{children:"We understand writing type annotations can be tedious, so from the start Pyrefly has had some capabilities for automatically inferring types for returns and local variables and displaying them in the IDE. Since the first alpha release we\u2019ve been steadily expanding inference capabilities, for example by improving our ability to infer the types of empty containers on first use:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-py",children:"from typing import reveal_type\n\ndef f[T](x: T | None) -> list[T]:\n    return [x] if x else []\n\nx = f(None)\nx.append(1)\n\n# Pyrefly is now able to infer that `x` has type `list[int]`.\nreveal_type(x)\n\n"})}),"\n",(0,o.jsx)(n.h4,{id:"type-narrowing",children:(0,o.jsx)(n.strong,{children:"Type Narrowing"})}),"\n",(0,o.jsxs)(n.p,{children:['We\u2019ve added several new ways to narrow types and reworked type narrowing logic to prevent unwanted "pollution" of types after checks like ',(0,o.jsx)(n.code,{children:"isinstance"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-py",children:"from typing import Any, reveal_type\n\ndef f(x: Any):\n    if isinstance(x, int):\n        print(x)\n    # Reworked type narrowing means the revealed type is now correctly `Any`,\n    # not `int | Any` as it was previously.\n    reveal_type(x)\n"})}),"\n",(0,o.jsx)(n.h3,{id:"preliminary-support-for-pydantic-and-django",children:"Preliminary Support for Pydantic and Django"}),"\n",(0,o.jsx)(n.p,{children:"We\u2019ve added preliminary support for two of the most popular Python web/data libraries: Pydantic and Django. Pyrefly can now recognize key objects from these libraries and perform static analysis to catch potential errors before you ever run your code. This support works out-of-the-box with no configuration or plugins required, and includes IDE support."}),"\n",(0,o.jsx)(n.h4,{id:"django-support",children:(0,o.jsx)(n.strong,{children:"Django Support"})}),"\n",(0,o.jsxs)(n.p,{children:["As shown in this example, by default, Django automatically adds an ",(0,o.jsx)(n.code,{children:"id"})," field to serve as the primary key (unless you define a custom primary key). Pyrefly is able to infer that the id exists and is of type ",(0,o.jsx)(n.code,{children:"int"})]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-py",children:"from django.db import models\n\nclass Reporter(models.Model):\n    full_name = models.CharField(max_length=70)\n    # Django auto-adds: id = models.AutoField(primary_key=True)\n\nreporter = Reporter()\nreveal_type(reporter.id)  # Pyrefly infers: int\n"})}),"\n",(0,o.jsxs)(n.p,{children:["See more examples in the ",(0,o.jsx)(n.a,{href:"https://pyrefly.org/en/docs/django/",children:"Pyrefly Django docs"}),"."]}),"\n",(0,o.jsx)(n.h4,{id:"pydantic-support",children:(0,o.jsx)(n.strong,{children:"Pydantic Support"})}),"\n",(0,o.jsxs)(n.p,{children:["In this example Pyrefly can read your Pydantic model\u2019s configuration directly from your code to determine there is a type error where ",(0,o.jsx)(n.code,{children:"age"})," should be an ",(0,o.jsx)(n.code,{children:"int"})," not a ",(0,o.jsx)(n.code,{children:"string"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-py",children:'from pydantic import BaseModel, Field\n\nclass User(BaseModel):\n    name: str\n    age: int = Field(strict=True) # strict mode\n\n# Pyrefly will report an error here.\ny = User(name="Alice", age="30")\n'})}),"\n",(0,o.jsxs)(n.p,{children:["See more examples in the ",(0,o.jsx)(n.a,{href:"https://pyrefly.org/en/docs/pydantic/",children:"Pyrefly Pydantic docs"})]}),"\n",(0,o.jsx)(n.h4,{id:"dataclass-transforms-support",children:(0,o.jsx)(n.strong,{children:"Dataclass Transforms Support"})}),"\n",(0,o.jsxs)(n.p,{children:["An important addition that laid the foundation for supporting libraries like ",(0,o.jsx)(n.code,{children:"attrs"})," and Pydantic, was allowing Pyrefly to recognize custom dataclass-like class transformations:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-py",children:"from attrs import define  # third-party `attrs` package\n\n@define\nclass C:\n    x: int\n\n# `attrs` uses a dataclass transform, and Pyrefly now recognizes the\n# auto-generated constructor based on the class attributes.\nC(x=0)\n"})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"-an-improved-user-experience",children:"\ud83d\ude4c An improved user experience"}),"\n",(0,o.jsx)(n.p,{children:"We understand writing type annotations, dealing with strict checks, and configuring tools can be a barrier to adopting typed Python for many people, so we are always looking for ways to make using Pyrefly as painless as possible, dare we say even delightful? This section highlights some of the incremental improvements we've been working on to improve the overall user experience:"}),"\n",(0,o.jsx)(n.h4,{id:"type-error-message-improvements",children:(0,o.jsx)(n.strong,{children:"Type Error Message Improvements"})}),"\n",(0,o.jsx)(n.p,{children:"We\u2019ve also cleaned up our error messages, making them clearer and providing embedded code snippets to pinpoint the exact location of the issue:"}),"\n",(0,o.jsx)(n.p,{children:"Before:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"foo.py:1:5-15: `+` is not supported between `Literal[1]` and `Literal['oops']`\n"})}),"\n",(0,o.jsx)(n.p,{children:"After (with snippet and detailed explanation):"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"ERROR `+` is not supported between `Literal[1]` and `Literal['oops']` [unsupported-operation]\n --\x3e foo.py:1:5\n  |\n1 | x = 1 + \"oops\"\n  |     ^^^^^^^^^^\n  |\n  Argument `Literal['oops']` is not assignable to parameter `value` with type `int` in function `int.__add__`\n"})}),"\n",(0,o.jsx)(n.h4,{id:"smoother-migration-from-mypy-or-pyright",children:(0,o.jsx)(n.strong,{children:"Smoother migration from MyPy or Pyright"})}),"\n",(0,o.jsxs)(n.p,{children:["Different typecheckers display different behaviour, which can make it a challenge to switch from one to another. While it's not always possible to cleanly translate one config option to another, the ",(0,o.jsx)(n.code,{children:"pyrefly init"})," command now does a better job of searching for an existing MyPy or Pyright configuration and transforming it into a ",(0,o.jsx)(n.code,{children:"pyrefly.toml"})," (or ",(0,o.jsx)(n.code,{children:"[tool.pyrefly]"})," section). You can find more details in the ",(0,o.jsx)(n.a,{href:"https://pyrefly.org/en/docs/migrating-to-pyrefly/",children:"migration guides section"})," of the Pyrefly docs."]}),"\n",(0,o.jsx)(n.h4,{id:"a-more-configurable-ide-experience",children:(0,o.jsx)(n.strong,{children:"A more configurable IDE experience"})}),"\n",(0,o.jsxs)(n.p,{children:["Do you want type error diagnostics (i.e. the red squiggles) in your IDE or not? Do you want to use Pyrefly\u2019s type errors but not other LSP features? Do you want to pick and choose specific language server features to enable? We know that how you set up your code editor is a personal choice, so we\u2019ve added ",(0,o.jsx)(n.a,{href:"https://pyrefly.org/en/docs/IDE/#customization",children:"more configuration options"})," to enable you to \u201cchoose your own adventure\u201d with your Pyrefly IDE experience."]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"-enhancing-performance-squashing-bugs-and-aligning-with-the-spec",children:"\ud83d\udd2c Enhancing Performance, Squashing Bugs and Aligning with the Spec"}),"\n",(0,o.jsxs)(n.p,{children:["We started developing Pyrefly with a clear goal in mind: make a tool that can statically analyze your code, catch type-related bugs, and do it ",(0,o.jsx)(n.em,{children:"much"})," faster than existing tools like Mypy. While performance was good even in the early releases of Pyrefly, on the journey to Beta we\u2019ve been focused on improvements for increasingly complex codebases, reducing type checking time and addressing edge cases for projects of varying size with many dependencies."]}),"\n",(0,o.jsxs)(n.p,{children:["In some cases we\u2019ve been able to reduce the time it takes to type check large projects with virtual envs, node-modules and other large dependencies by over 95% compared to earlier alpha versions of pyrefly. We've also closed ",(0,o.jsx)(n.strong,{children:"over 350 bug issues"})," opened by users and have been using the ",(0,o.jsx)(n.a,{href:"https://htmlpreview.github.io/?https://github.com/python/typing/blob/main/conformance/results/results.html",children:"Python typing conformance test suite"})," to benchmark our progress towards fully implementing the typing specification. So far we\u2019ve gone from ",(0,o.jsx)(n.strong,{children:"39% conformant at alpha launch to over 70% conformant today."})]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsxs)(n.p,{children:["There\u2019s a lot more that\u2019s been happening than we can possibly be squeezed into one blog post, so if you\u2019d like to take a look back in more detail you can check out the completed ",(0,o.jsx)(n.a,{href:"https://github.com/facebook/pyrefly/milestone/4",children:"beta milestone"})," or our previous ",(0,o.jsx)(n.a,{href:"https://github.com/facebook/pyrefly/releases",children:"release notes"}),"."]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"whats-next",children:"What\u2019s Next?"}),"\n",(0,o.jsx)(n.p,{children:"This Beta release marks a significant milestone, but the journey isn't over! We\u2019re now focusing on the further work that is needed to bring you a stable v1.0 release next year, including:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Adding further support for popular third-party libraries (especially Django and Pydantic integration)."}),"\n",(0,o.jsx)(n.li,{children:"Implementing the remaining missing features from the Python type system to reach 100% conformance."}),"\n",(0,o.jsx)(n.li,{children:"Making Pyrefly work even faster and consume even less memory"}),"\n",(0,o.jsx)(n.li,{children:"Fixing more bugs!"}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["We\u2019d also like to say a huge thank-you to everyone who has helped get Pyrefly to this release. Whether you\u2019ve contributed to the codebase, opened GitHub issues or just commented with your questions and feedback, your contributions have helped shape the direction of this project thus far. If you want to stay in the loop and continue being part of the conversation as we work towards Pyrefly v1.0 you can check out the ",(0,o.jsx)(n.a,{href:"https://github.com/facebook/pyrefly",children:"GitHub repo"})," or join our ",(0,o.jsx)(n.a,{href:"https://discord.gg/Cf7mFQtW7W",children:"Discord"})," community."]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},75474(e,n,t){t.d(n,{A:()=>r});const r=t.p+"assets/images/release-news-d289bbc4c41029b55f21ed9165321bf5.png"},28453(e,n,t){t.d(n,{R:()=>s,x:()=>a});var r=t(96540);const o={},i=r.createContext(o);function s(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),r.createElement(i.Provider,{value:n},e.children)}},98124(e){e.exports=JSON.parse('{"permalink":"/blog/pyrefly-beta","source":"@site/blog/2025-11-17-pyrefly-beta.mdx","title":"Pyrefly Beta is here!","description":"Pyrefly v0.42.0 marks the first beta release of Pyrefly.","date":"2025-11-17T00:00:00.000Z","tags":[{"inline":true,"label":"news","permalink":"/blog/tags/news"},{"inline":true,"label":"typechecking","permalink":"/blog/tags/typechecking"},{"inline":true,"label":"IDE","permalink":"/blog/tags/ide"}],"readingTime":8.285,"hasTruncateMarker":true,"authors":[{"name":"Pyrefly Team","url":"https://github.com/facebook/pyrefly","key":"pyreflyteam","page":null}],"frontMatter":{"title":"Pyrefly Beta is here!","description":"Pyrefly v0.42.0 marks the first beta release of Pyrefly.","slug":"pyrefly-beta","authors":["pyreflyteam"],"tags":["news","typechecking","IDE"],"image":"https://pyrefly.org/assets/images/release-news-d289bbc4c41029b55f21ed9165321bf5.png","hide_table_of_contents":false,"toc_max_heading_level":4},"unlisted":false,"prevItem":{"title":"Fly through data validation with Pyrefly\u2019s new Pydantic integration","permalink":"/blog/pyrefly-pydantic"},"nextItem":{"title":"Bringing NumPy\'s type-completeness score to nearly 90%","permalink":"/blog/numpy-type-completeness"}}')}}]);