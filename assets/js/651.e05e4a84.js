"use strict";(globalThis.webpackChunknew_website=globalThis.webpackChunknew_website||[]).push([[651],{80651(e,n,d){d.r(n),d.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>x,frontMatter:()=>r,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"pydantic-lax-conversions","title":"Pydantic Lax Mode Type Conversions","description":"Complete reference of how Pyrefly converts types in Pydantic lax mode.","source":"@site/docs/pydantic-lax-conversions.mdx","sourceDirName":".","slug":"/pydantic-lax-conversions","permalink":"/en/docs/pydantic-lax-conversions","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/pyrefly/edit/main/website/docs/pydantic-lax-conversions.mdx","tags":[],"version":"current","frontMatter":{"title":"Pydantic Lax Mode Type Conversions","description":"Complete reference of how Pyrefly converts types in Pydantic lax mode."},"sidebar":"docsSidebar","previous":{"title":"Overview","permalink":"/en/docs/pydantic"},"next":{"title":"Django Support","permalink":"/en/docs/django"}}');var t=d(74848),c=d(28453);const r={title:"Pydantic Lax Mode Type Conversions",description:"Complete reference of how Pyrefly converts types in Pydantic lax mode."},i="Pydantic Lax Mode Type Conversions",l={},o=[{value:"Atomic Type Conversions",id:"atomic-type-conversions",level:2},{value:"Compositional Type Conversions",id:"compositional-type-conversions",level:2}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,c.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:["\n",(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"pydantic-lax-mode-type-conversions",children:"Pydantic Lax Mode Type Conversions"})}),"\n",(0,t.jsxs)(n.p,{children:["This page provides a complete reference for how Pyrefly converts types when working with Pydantic models in ",(0,t.jsx)(n.strong,{children:"lax mode"})," (the default). For background on how lax mode works, see the ",(0,t.jsx)(n.a,{href:"../pydantic",children:"main Pydantic documentation"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note:"})," Types without a specific conversion rule (e.g., ",(0,t.jsx)(n.code,{children:"Callable"}),", ",(0,t.jsx)(n.code,{children:"Any"}),", custom classes) are converted to ",(0,t.jsx)(n.code,{children:"Any"}),"."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"atomic-type-conversions",children:"Atomic Type Conversions"}),"\n",(0,t.jsx)(n.p,{children:"Named unions are used for atomic types to keep type signatures concise."}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Input Type"}),(0,t.jsx)(n.th,{children:"Named Union"}),(0,t.jsx)(n.th,{children:"Expanded Type"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"int"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"LaxInt"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"int | bool | float | str | bytes | Decimal"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"float"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"LaxFloat"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"int | bool | float | str | bytes | Decimal"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"bool"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"LaxBool"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"bool | int | float | str | Decimal"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Decimal"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"LaxDecimal"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Decimal | int | float | str"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"str"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"LaxStr"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"str | bytes | bytearray"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"bytes"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"LaxBytes"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"str | bytes | bytearray"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"date"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"LaxDate"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"date | datetime | int | float | str | bytes | Decimal"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"datetime"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"LaxDatetime"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"date | datetime | int | float | str | bytes | Decimal"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"time"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"LaxTime"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"time | int | float | str | bytes | Decimal"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"timedelta"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"LaxTimedelta"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"timedelta | int | float | str | bytes | Decimal"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Path"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"LaxPath"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Path | str"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"UUID"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"LaxUuid"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"UUID | str"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"None"})}),(0,t.jsx)(n.td,{children:"(no conversion)"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"None"})})]})]})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"compositional-type-conversions",children:"Compositional Type Conversions"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Notation:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"T_converted"})," means the type ",(0,t.jsx)(n.code,{children:"T"})," is recursively converted using lax mode rules (e.g., ",(0,t.jsx)(n.code,{children:"int"})," \u2192 ",(0,t.jsx)(n.code,{children:"LaxInt"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"T_flattened"})," means the type ",(0,t.jsx)(n.code,{children:"T"})," is converted and expanded (e.g., ",(0,t.jsx)(n.code,{children:"int"})," \u2192 ",(0,t.jsx)(n.code,{children:"int | bool | float | str | bytes | Decimal"}),")"]}),"\n"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Input Type/Container"}),(0,t.jsx)(n.th,{children:"Output Type/Container"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"type[T]"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"type[T_converted]"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"T1 | T2 | ..."})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"T1_flattened | T2_flattened | ..."})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"list[T]"}),", ",(0,t.jsx)(n.code,{children:"set[T]"}),", ",(0,t.jsx)(n.code,{children:"frozenset[T]"}),",",(0,t.jsx)("br",{}),(0,t.jsx)(n.code,{children:"Sequence[T]"}),", ",(0,t.jsx)(n.code,{children:"Iterable[T]"}),", ",(0,t.jsx)(n.code,{children:"deque[T]"}),",",(0,t.jsx)("br",{}),(0,t.jsx)(n.code,{children:"tuple[T, ...]"})]}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Iterable[T_converted]"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"tuple[T1, T2, ...]"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Iterable[T1_flattened | T2_flattened | ...]"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"dict[K, V]"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Mapping[K, V_converted]"})})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Examples:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Type wrapper:"})," ",(0,t.jsx)(n.code,{children:"type[int]"})," \u2192 ",(0,t.jsx)(n.code,{children:"type[LaxInt]"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Union types:"})," Each member is converted and flattened. ",(0,t.jsx)(n.code,{children:"int | bool"})," \u2192 ",(0,t.jsx)(n.code,{children:"int | bool | float | str | bytes | Decimal"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Single-element containers and unbounded tuples:"})," Named unions are preserved. ",(0,t.jsx)(n.code,{children:"list[int]"})," \u2192 ",(0,t.jsx)(n.code,{children:"Iterable[LaxInt]"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Concrete tuples:"})," Element types are expanded and flattened. ",(0,t.jsx)(n.code,{children:"tuple[int, str]"})," \u2192 ",(0,t.jsx)(n.code,{children:"Iterable[int | bool | float | str | bytes | bytearray | Decimal]"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Dictionaries:"})," Only values are converted; keys remain unchanged. ",(0,t.jsx)(n.code,{children:"dict[str, int]"})," \u2192 ",(0,t.jsx)(n.code,{children:"Mapping[str, LaxInt]"})]}),"\n"]})]})}function x(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},28453(e,n,d){d.d(n,{R:()=>r,x:()=>i});var s=d(96540);const t={},c=s.createContext(t);function r(e){const n=s.useContext(c);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),s.createElement(c.Provider,{value:n},e.children)}}}]);