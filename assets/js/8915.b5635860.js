"use strict";(self.webpackChunknew_website=self.webpackChunknew_website||[]).push([[8915],{18915:(e,n,t)=>{t.r(n),t.d(n,{createRunPythonCodeFunction:()=>K,default:()=>U,initializePyreflyWasm:()=>M});var o=t(96540),r=t(29030),i=t(8532),s=t(32855),a=t(75812),l=t(74848);const u=40;function x(e,n){e(!0);const t=new Promise((e=>{setTimeout((()=>{e()}),1e3)}));return Promise.all([n(),t]).then((()=>{e(!1)}))}function c(e){let{id:n,onClick:t,defaultLabel:r,runningLabel:i,ariaLabel:s,isRunning:u,setIsRunning:c}=e;void 0!==u&&void 0!==c||([u,c]=(0,o.useState)(!1));const d=u;return(0,l.jsx)("button",{id:n,...{0:{className:"x78zum5 x6s0dn4 x1khhgft x1ypdohk x169l3ba xfo81ep xpivpjv x1vqgdyp x1aq8l9j x1v03e3n x1789zll x1com5t6 x1eqz52 x66in4q x1heor9g x1q0gjfv xxxer0w x1fh9xkg x1ru2czo"},2:{className:"x78zum5 x6s0dn4 x1khhgft x1ypdohk x169l3ba xfo81ep xpivpjv x1vqgdyp x1aq8l9j x1v03e3n x1789zll x1com5t6 x9yugl5 x1awj2ng xrynbky x1q0gjfv x1rpuqfj x4afe7t x1debuo4 x1jutyc x187oe4h x1fh9xkg x1ru2czo"},1:{className:"x78zum5 x6s0dn4 x1khhgft x169l3ba xfo81ep xpivpjv x1vqgdyp x1aq8l9j x1v03e3n x1789zll x1com5t6 x1eqz52 x66in4q x1heor9g x1q0gjfv xxxer0w x1fh9xkg x1ru2czo x1h6gzvc"},3:{className:"x78zum5 x6s0dn4 x1khhgft x169l3ba xfo81ep xpivpjv x1vqgdyp x1aq8l9j x1v03e3n x1789zll x1com5t6 x9yugl5 x1awj2ng xrynbky x1q0gjfv x1rpuqfj x4afe7t x1debuo4 x1jutyc x187oe4h x1fh9xkg x1ru2czo x1h6gzvc"}}[!!u<<1|!!d],onClick:async function(){if(!d){(0,a.R)(a.Y.CLICK,{button_id:n});try{x(c,t)}catch(e){console.error("Error in button action:",e)}}},"aria-label":s||n,disabled:d,onMouseEnter:()=>(0,a.R)(a.Y.HOVER,{button_id:n}),children:(0,l.jsx)("span",{className:"xmtou6a",children:u?i:r})})}let d=function(e){return e.NOT_INITIALIZED="not_initialized",e.INITIALIZING="initializing",e.RUNNING="running",e.FINISHED_RUNNING="finished_running",e}({});function p(e){let{runPython:n,pyodideStatus:t,setPyodideStatus:o}=e;const r=t===d.INITIALIZING||t===d.RUNNING;return(0,l.jsx)(c,{id:"run-python-button",onClick:n,defaultLabel:"\u25b6\ufe0f Run",runningLabel:"\u23f3 Running...",ariaLabel:"run Python code button",isRunning:r,setIsRunning:e=>{o(e?d.RUNNING:d.FINISHED_RUNNING)}})}var f=t(68553),m=t(32992);function h(e){let{error:n,goToDef:t}=e;const{startLineNumber:o,startColumn:i,endLineNumber:s,endColumn:a}=n;let u;u=o===s?i===a?`${o}:${i}`:`${o}:${i}-${a}`:`${o}:${i}-${s}:${a}`;const x=(0,l.jsx)("a",{href:(0,r.default)(`en/docs/error-kinds/#${n.kind}`),target:"_blank",rel:"noopener noreferrer",children:n.kind});return(0,l.jsxs)("span",{className:"x1ypdohk",onClick:()=>t(o,i,s,a),children:[2==n.severity?(0,l.jsxs)("span",{className:"x1s8ghek",children:[" ","INFO"," "]}):4==n.severity?(0,l.jsxs)("span",{className:"xburs04",children:[" ","WARN"," "]}):(0,l.jsxs)("span",{className:"x1x2k2ee",children:["ERROR"," "]}),`${n.filename}:${u}: ${n.message_header} `,"[",x,"]",n.message_details&&"\n"+n.message_details]})}function y(e){let{loading:n,goToDef:t,errors:o,internalError:r,pythonOutput:i,pyodideStatus:s,activeTab:a,setActiveTab:u=()=>{}}=e;const x=a,c=null!=o&&o.length>0;return(0,l.jsxs)("div",{id:"sandbox-results-container",className:"xh2ww80 x1n2onr6 xfifm61 x1eqz52 xr44f5h",children:[(0,l.jsx)("div",{className:"x78zum5 x1eqz52 xc7mbzt xif65rj",children:(0,l.jsxs)("ul",{className:"x78zum5 xe8uvvx x1ghz6dp x1717udv x67bb7w",children:[(0,l.jsx)("li",{...{0:{className:"x1tc92mu x1ypdohk x117nqv4 x7pa710"},1:{className:"x1tc92mu x1ypdohk x117nqv4 x7pa710 x1eqz52 x16u9nvt x1jyxor1"}}[!("errors"!==x)|0],onClick:()=>u("errors"),children:"Type Checking Errors"}),(0,l.jsx)("li",{...{0:{className:"x1tc92mu x1ypdohk x117nqv4 x7pa710"},1:{className:"x1tc92mu x1ypdohk x117nqv4 x7pa710 x1eqz52 x16u9nvt x1jyxor1"}}[!("output"!==x)|0],onClick:()=>u("output"),children:"Runtime Output"})]})}),(0,l.jsxs)("div",{className:"xysyzu8 x1io82uz",children:[n&&(0,l.jsx)("div",{children:(0,l.jsxs)("div",{className:"x78zum5 xl56j7k x1anpbxc",children:[(0,l.jsx)("div",{className:"x6jxa94 x1v9usgg x18t7k3x xorixrz x1bo1o3z x1sbju2s xa4qsjk x4hg4is x1u6ievf xkf7kw9"}),(0,l.jsx)("div",{className:"x6jxa94 x1v9usgg x18t7k3x xorixrz x1bo1o3z x1sbju2s xa4qsjk x4hg4is x1u6ievf xlzs402"}),(0,l.jsx)("div",{className:"x6jxa94 x1v9usgg x18t7k3x xorixrz x1bo1o3z x1sbju2s xa4qsjk x4hg4is x1u6ievf"})]})}),!n&&"errors"===x&&(0,l.jsx)("pre",{className:"xknfcqp x1awh872 xat24cr x1eqz52 xh8yej3 x126k92a x13faqbe x1lliihq",children:(0,l.jsx)("ul",{className:"xe8uvvx x1ghz6dp x1717udv",children:c?o.map(((e,n)=>(0,l.jsx)("li",{...{0:{},1:{className:"x1anpbxc x889kno x19j24cx x1eqz52"}}[!!(n>0)|0],children:(0,l.jsx)(h,{error:e,goToDef:t},n)},n))):(0,l.jsx)("li",{children:r?`Pyrefly encountered an internal error: ${r}.`:null==o?"Pyrefly failed to fetch errors.":0===o?.length?"No errors!":null})})}),"output"===x&&(0,l.jsxs)("pre",{className:"xknfcqp x1awh872 xat24cr x1eqz52 xh8yej3 x126k92a x13faqbe x1lliihq",children:[(0,l.jsx)("span",{className:"x14qql8p",children:"Note: The Python runtime currently only supports features up to Python version 3.12, features from newer versions are not available. \n\n"}),s===d.NOT_INITIALIZED?"No output, please press the \u25b6\ufe0f Run button.":s===d.INITIALIZING?"Loading Python interpreter...":s===d.RUNNING?"Running...":i.trimStart()]})]})]})}var g=t(84138);const b=(e,n)=>{throw"not implemented"},v=new Map;const j=(e,n)=>null,k=new Map;const N=(e,n)=>null,z=new Map;const w=()=>[],C=new Map;g.languages.register({id:"python",extensions:[".py"],aliases:["Python"]}),g.languages.registerCompletionItemProvider("python",{triggerCharacters:[".","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","[",'"',"'"],provideCompletionItems(e,n){try{const t=v.get(e)??b;return{suggestions:t(n.lineNumber,n.column).map((e=>({...e,insertText:e.label.toString()})))}}catch(t){return console.error(t),null}}}),g.languages.registerDefinitionProvider("python",{provideDefinition(e,n){try{const t=(k.get(e)??j)(n.lineNumber,n.column);return null!=t?{uri:e.uri,range:t}:null}catch(t){return console.error(t),null}}}),g.languages.registerHoverProvider("python",{provideHover:(e,n)=>(z.get(e)??N)(n.lineNumber,n.column)}),g.languages.registerInlayHintsProvider("python",{provideInlayHints:e=>({hints:(C.get(e)??w)(),dispose:()=>{}})}),f.wG.config({monaco:g});const q="\n# Welcome to the Pyrefly Sandbox, this is a page\n# where you can write, share and learn about typing in Python.\n#\n# Here are a couple features of this sandbox:\n# - Get real-time type checking feedback\n# - Use reveal_type() to inspect inferred types\n# - experiment with the IDE features that we support (e.g. autocomplete, go-to-definition, hover, etc)\n# - Write and run Python code directly in your browser\n\nfrom typing import *\nfrom utils import format_number\n\ndef test(x: int):\n  return format_number(x)\n\n# reveal_type will produce a type error that tells you the type Pyrefly has\n# computed for the return (in this case, str)\nreveal_type(test(42))\n".trimStart(),I='\n# Utility functions\n\ndef format_number(x: int) -> str:\n    return f"Number: {x}"\n'.trimStart();let S=null,P=null,R=null;const L=async e=>{if(S&&R)return R(""),new Promise((n=>{P=n,S?.postMessage(e)}));console.error("Python worker not initialized. Call initializePythonWorker first.")},$=async(e,n)=>{if(S&&R)return R(""),new Promise((t=>{P=t;const o={activeFile:e,allFiles:n};S?.postMessage(o)}));console.error("Python worker not initialized. Call initializePythonWorker first.")},E=e=>{let{setPythonOutput:n,setPyodideStatus:r}=e;return(0,o.useEffect)((()=>(null===S&&((e,n)=>{if(null!==S)return;R=e;const o=new Worker(new URL(t.p+t.u(8123),t.b),{type:void 0});o.onmessage=t=>{const o=t.data;switch(o.type){case"stdout":case"stderr":return void e((e=>e+"\n"+o.output));case"pyodideStatusUpdate":return void n(o.status);case"runPython":return!o.success&&o.error&&e((e=>e+"\n"+`Error: ${o.error}`)),void(P&&(P(),P=null));default:console.error(`Unknown message type received from worker: ${o}`)}},S=o})(n,r),()=>{})),[n,r]),{runPython:L,runMultiFilePython:$}};async function M(){const e="undefined"!=typeof window?t.e(3190).then(t.bind(t,93190)):new Promise((e=>{}));try{const n=await e;return await n.default(),await n}catch(n){throw console.error(n),n}}let T=null;function U(e){let{sampleFilename:n,isCodeSnippet:t=!1,codeSample:r=q,isInViewport:i=!0}=e;const a=(0,o.useRef)(null),[c,p]=(0,o.useState)([]),[f,h]=(0,o.useState)(""),[b,j]=(0,o.useState)(!0),[N,w]=(0,o.useState)(null),[S,P]=(0,o.useState)(null),[R,L]=(0,o.useState)(new Map),[$,U]=(0,o.useState)("sandbox.py"),[F,Y]=(0,o.useState)(null),[Q,X]=(0,o.useState)(""),[ee,ne]=(0,o.useState)(d.NOT_INITIALIZED),[te,oe]=(0,o.useState)(""),[re,ie]=(0,o.useState)("errors"),[se,ae]=(0,o.useState)(!1),[le,ue]=(0,o.useState)("3.12"),xe=R.get($)||null,ce=(0,o.useCallback)((function(e,n){void 0===n&&(n="");const t=g.editor.getModels().find((n=>n.uri.path===`/${e}`));let o;if(t)t.setValue(n),o=t;else{const t=e.endsWith(".toml")?"toml":"python";o=g.editor.createModel(n,t,g.Uri.file(`/${e}`))}L((n=>new Map(n).set(e,o))),U(e)}),[]),de=(0,o.useCallback)((e=>{if(R.has(e)){U(e);const n=a.current,t=R.get(e);n&&t&&n.setModel(t),N&&N.setActiveFile(e)}}),[R,N]),pe=(0,o.useCallback)((()=>{if(F)return;let e=1,n="untitled.py";for(;R.has(n);)n=`untitled${e}.py`,e++;ce(n,""),Y(n),X("")}),[R,ce,F]),fe=(0,o.useCallback)(((e,n)=>{if(!n.trim()||R.has(n))return!1;let t;const o=n.trim();if("pyrefly.toml"===o||o.endsWith("/pyrefly.toml"))t="pyrefly.toml";else{if(!o.endsWith(".py"))return!1;t=o}if(R.has(t))return!1;const r=R.get(e);if(!r)return!1;const i=t.endsWith(".toml")?"toml":"python",s=g.editor.createModel(r.getValue(),i,g.Uri.file(`/${t}`)),l=a.current;return $===e&&l&&l.setModel(s),L((n=>{const o=new Map(n);return o.delete(e),o.set(t,s),o})),$===e&&U(t),setTimeout((()=>{r.dispose()}),100),!0}),[R,$]),me=(0,o.useCallback)(((e,n)=>{if(!e.trim())return!1;const t=e.trim();return!(!t.endsWith(".py")&&"pyrefly.toml"!==t)&&(t===n||!R.has(t))}),[R]),he=(0,o.useCallback)((()=>{if(!F)return;if(!me(Q,F))return;fe(F,Q.trim())&&(Y(null),X(""))}),[F,Q,fe,me]),ye=(0,o.useCallback)((e=>{if("sandbox.py"===e)return!1;const n=R.get(e);if(!n)return!1;if(L((n=>{const t=new Map(n);return t.delete(e),t})),$===e){U("sandbox.py");const e=a.current,n=R.get("sandbox.py");e&&n&&e.setModel(n)}return F===e&&(Y(null),X("")),setTimeout((()=>{n.dispose()}),100),!0}),[R,$,F]),ge=()=>(0,l.jsxs)("div",{className:"x78zum5 x1eqz52 xc7mbzt xif65rj xejiqos xjblrfn x6s0dn4",children:[Array.from(R.keys()).map((e=>(0,l.jsx)("div",{className:"x78zum5 x6s0dn4",children:F===e?(0,l.jsxs)("div",{...{0:{className:"x78zum5 x6s0dn4 xdqdrvq x18t7k3x x1e13svl x18zih8k x10d6zji"},1:{className:"x78zum5 x6s0dn4 xdqdrvq x18t7k3x x1e13svl x18zih8k x10d6zji xkuhdyg"}}[!me(Q,e)|0],children:[(0,l.jsx)("input",{className:"x1gs6z28 x1md70p1 xiuzu7u xif65rj x117nqv4 x1a2a7pz x6c5l4p x16q51m2",value:Q,onChange:e=>X(e.target.value),onKeyDown:e=>{"Enter"===e.key||e.ctrlKey&&"s"===e.key?(e.preventDefault(),he()):"Escape"===e.key&&(Y(null),X(""))},onBlur:he,placeholder:"Enter filename",autoFocus:!0}),(0,l.jsx)("span",{className:"xv1l7n4 xif65rj x117nqv4 x1swdo50"})]}):(0,l.jsx)("button",{onClick:()=>de(e),...{0:{className:"x1tc92mu x1ypdohk x117nqv4 x7pa710 x1gs6z28 xjbqb8w xiuzu7u xif65rj xahlotz"},1:{className:"x1tc92mu x1ypdohk x117nqv4 x7pa710 x1gs6z28 xiuzu7u xif65rj xahlotz x1eqz52 x16u9nvt x1jyxor1"}}[!(e!==$)|0],children:e})},e))),(0,l.jsxs)("div",{className:"x78zum5 x6s0dn4 x1jnr06f xet2fuk",children:[(0,l.jsx)("button",{onClick:()=>ye($),...{0:{className:"x1gs6z28 x1md70p1 xiuzu7u x1ypdohk x2lkgqm x117nqv4 x12oqio5 x46jg8d x78zum5 x6s0dn4 xl56j7k x15otokf xosj86m xnj1at0"},1:{className:"x1gs6z28 x1md70p1 xiuzu7u x2lkgqm x117nqv4 x12oqio5 x46jg8d x78zum5 x6s0dn4 xl56j7k xosj86m xti2d7y x1h6gzvc x1n5bzlp x8joddd"}}[!("sandbox.py"!==$)|0],title:"sandbox.py"===$?"Cannot delete sandbox.py":F?"Cancel":"Delete file",disabled:"sandbox.py"===$,onMouseDown:e=>{e.preventDefault()},children:"\xd7"}),F?(0,l.jsx)("button",{onClick:he,...{0:{className:"x1gs6z28 x1md70p1 xiuzu7u x1ypdohk x2lkgqm x1j61zf2 x117nqv4 x12oqio5 x46jg8d x78zum5 x6s0dn4 xl56j7k x15otokf x12602er"},1:{className:"x1gs6z28 x1md70p1 xiuzu7u x2lkgqm x1j61zf2 x117nqv4 x12oqio5 x46jg8d x78zum5 x6s0dn4 xl56j7k xti2d7y x1h6gzvc x1n5bzlp x8joddd"}}[!me(Q,F)|0],title:me(Q,F)?"Save file name":"Invalid filename",disabled:!me(Q,F),children:"\u2713"}):(0,l.jsx)("button",{onClick:pe,className:"x1gs6z28 x1md70p1 xiuzu7u x1ypdohk x2lkgqm x1j61zf2 x117nqv4 x12oqio5 x46jg8d x78zum5 x6s0dn4 xl56j7k x15otokf",title:"Add new file",children:"+"})]})]});function be(e){if(R.size>0&&N&&xe){const n={};if(R.forEach(((e,t)=>{n[t]=e.getValue()})),Object.keys(n).length>0){const t=N.updateSandboxFiles(n,e);t&&ue(t),N.setActiveFile($)}return!0}return!1}function ve(){if(null!=xe&&null!=N){!function(e,n){v.set(e,n)}(xe,((e,n)=>N.autoComplete(e,n))),function(e,n){k.set(e,n)}(xe,((e,n)=>N.gotoDefinition(e,n))),function(e,n){z.set(e,n)}(xe,((e,n)=>N.queryType(e,n))),function(e,n){C.set(e,n)}(xe,(()=>N?.inlayHint()||[]));try{if("pyrefly.toml"===$)be(!1),N.setActiveFile($);else if(R.size>1){const e=xe.getValue();N.updateSingleFile($,e),N.setActiveFile($)}else{const e=xe.getValue();N.updateSingleFile($,e)}const e=N.getErrors();R.forEach((e=>{g.editor.setModelMarkers(e,"default",[])}));const n=new Map;e.forEach((e=>{const t=e.filename||$;n.has(t)||n.set(t,[]),n.get(t).push(e)})),n.forEach(((e,n)=>{const t=R.get(n);t&&g.editor.setModelMarkers(t,"default",function(e){return e.map((e=>{const n=e.message_details?`${e.message_header}\n${e.message_details}`:e.message_header;return{startLineNumber:e.startLineNumber,startColumn:e.startColumn,endLineNumber:e.endLineNumber,endColumn:e.endColumn,message:n,severity:e.severity}}))}(e))})),h(""),p(e)}catch(e){console.error(e),h(JSON.stringify(e)),p([])}}}(0,o.useEffect)((()=>{if(0===R.size){let e;const o=function(){if("undefined"==typeof window)return null;return new URLSearchParams(window.location.search).get("version")}();o?(ue(o),e=o):e=le;const i=function(e,n,t,o){const r=function(){if("undefined"==typeof window)return null;const e=new URLSearchParams(window.location.search),n=e.get("project");if(n)try{const e=m.decompressFromEncodedURIComponent(n);return e?JSON.parse(e):null}catch(o){console.error("Failed to parse project from URL:",o)}const t=e.get("code");if(t){const e=m.decompressFromEncodedURIComponent(t);if(e)return{files:{"sandbox.py":e},activeFile:"sandbox.py"}}return null}();if(!r)return!1;g.editor.getModels().forEach((e=>e.dispose())),t(new Map),Object.entries(r.files).forEach((n=>{let[t,o]=n;e(t,o)})),r.files["pyrefly.toml"]||e("pyrefly.toml",D(o));r.activeFile&&r.files[r.activeFile]&&n(r.activeFile);return!0}(ce,U,L,e);i||(t?(ce(n,r),U(n)):(ce("sandbox.py",q),ce("utils.py",I),ce("pyrefly.toml",D(e)),U("sandbox.py")))}}),[ce,R.size,t,n,r]),(0,o.useEffect)((()=>{i&&(j(!0),T||(T=M()),T.then((e=>{try{w(new e.State(le)),j(!1),h("")}catch(n){j(!1),h(`Failed to initialize with Python ${le}: ${n}`)}})).catch((e=>{j(!1),h(JSON.stringify(e))})))}),[i,le]),g.editor.onDidCreateModel((e=>{const n=_($);n&&L((e=>new Map(e).set($,n)))})),(0,o.useEffect)((()=>{const e=a.current,n=R.get($);e&&n&&e.getModel()!==n&&e.setModel(n)}),[$,R]),(0,o.useEffect)((()=>{ve()}),[N,xe]),(0,o.useEffect)((()=>{be(!0)&&setTimeout((()=>ve()),100)}),[R.size,N,xe,$]);const{runPython:je,runMultiFilePython:ke}=E({setPythonOutput:oe,setPyodideStatus:ne}),Ne=K(ie,je,ke,R,$),ze=(0,o.useCallback)((async()=>{xe&&(ne(d.RUNNING),await Ne(xe))}),[xe,ie,ne]);const we=function(e,n,t,r,i,s,a,u,x,c){let d=[];d=e?[(0,l.jsx)(G,{model:n}),W(n),O()?null:Z(n,s,a,e,x,c)].filter(Boolean):[H(t,r,i),V(),Z(n,s,a,e,x,c),A(n,u)];return d.map(((n,t)=>o.cloneElement(n,{key:`button-${t}`,...!e&&O()?{className:{className:"x1i06gni x1i8vjtc"}}:{}})))}(t,xe,ze,ee,ne,ve,r,le,R,$);return(0,l.jsxs)("div",{id:"sandbox-editor",...{0:{className:"x78zum5 xdt5ytf x98rzlu"},1:{className:"x78zum5 xdt5ytf x98rzlu x1awh872"}}[!(t||O())|0],children:[!t&&(0,l.jsx)(ge,{}),(0,l.jsxs)("div",{id:"sandbox-code-editor-container",...{0:{className:"x1n2onr6 x78zum5 x1rea2x4 x7hct1x x1eqz52 x5yr21d"},2:{className:"x1n2onr6 x78zum5 x1rea2x4 x7hct1x x1eqz52 x5yr21d x66in4q x16eypsj"},1:{className:"x1n2onr6 x78zum5 x1rea2x4 x7hct1x x1eqz52 x5yr21d x1ci220x x76ihet x1olqv08 xhbaxng x1iorvi4"},3:{className:"x1n2onr6 x78zum5 x1rea2x4 x7hct1x x1eqz52 x5yr21d x16eypsj x1ci220x x76ihet x1olqv08 xhbaxng x1iorvi4"}}[!!t<<1|!t],onMouseEnter:()=>ae(!0),onMouseLeave:()=>ae(!1),children:[B(t,$,xe?.getValue()||r,ve,(function(e){const n=_($);if(n&&L((e=>new Map(e).set($,n))),t){const n=O()?u+5:0;P(Math.max(50,e.getContentHeight()+n))}a.current=e,e.addCommand(g.KeyMod.CtrlCmd|g.KeyCode.Enter,(()=>{if(!t&&ee!==d.INITIALIZING&&ee!==d.RUNNING){const n=e.getModel();n&&x((e=>ne(e?d.RUNNING:d.FINISHED_RUNNING)),(async()=>{await Ne(n)}))}}))}),S,$,R),(0,l.jsx)("div",{...s.xk(J.buttonContainerBase,O()?t?J.mobileButtonContainerCodeSnippet:J.mobileButtonContainerSandbox:J.desktopButtonContainer,!t||se||O()?J.visibleButtonContainer:J.hiddenButtonContainer),children:we})]}),!t&&(0,l.jsx)(y,{loading:b,goToDef:(e,n,t,o)=>{const r=a.current;if(null===r)return;const i={startLineNumber:e,startColumn:n,endLineNumber:t,endColumn:o};r.revealRange(i),r.setSelection(i)},errors:c,internalError:f,pythonOutput:te,pyodideStatus:ee,activeTab:re,setActiveTab:ie})]})}function F(e,n){const t={files:e,activeFile:n},o=m.compressToEncodedURIComponent(JSON.stringify(t)),r=new URLSearchParams;r.set("project",o);const i=`${window.location.pathname}?${r.toString()}`;window.history.replaceState({},"",i)}function _(e){const n=g.editor.getModels().filter((n=>n?.uri?.path===`/${e}`))[0];return null==n?null:(n.setValue(n.getValue()),n.updateOptions({tabSize:4,insertSpaces:!0}),n)}function D(e){return["# Pyrefly sandbox configuration.","# See https://pyrefly.org/en/docs/configuration/ for available configuration options.",`python-version = "${e}"`,""].join("\n")}function O(){return/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)}function B(e,n,t,o,r,s,a,u){const{colorMode:x}=i.G(),c="dark"===x?"vs-dark":"vs-light";if(e)return(0,l.jsx)(f.Ay,{defaultPath:n,defaultValue:t,defaultLanguage:"python",theme:c,onChange:o,onMount:r,keepCurrentModel:!0,height:s,options:{readOnly:O(),domReadOnly:O(),minimap:{enabled:!1},hover:{enabled:!0,above:!1},scrollBeyondLastLine:!1,overviewRulerBorder:!1}});{const i=window.innerHeight,s=document.querySelector(".navbar"),x=75*(i-(s?.offsetHeight||0))/100;return(0,l.jsx)(f.Ay,{defaultPath:n,defaultValue:t,defaultLanguage:"python",theme:c,onChange:n=>{if(o(),"string"==typeof n&&!e){const e={};u.forEach(((t,o)=>{e[o]=o===a?n:t.getValue()})),F(e,a)}},onMount:r,keepCurrentModel:!0,height:x,options:{readOnly:!1,domReadOnly:!1,minimap:{enabled:!1},hover:{enabled:!0,above:!1},scrollBeyondLastLine:!1,overviewRulerBorder:!1}})}}function V(){return(0,l.jsx)(c,{id:"share-url-button",onClick:()=>{const e=window.location.href;return navigator.clipboard.writeText(e)},defaultLabel:"\ud83d\udccb Share URL",runningLabel:"\u2713 URL Copied!",ariaLabel:"share URL button"})}function A(e,n){return(0,l.jsx)(c,{id:"github-issues-button",onClick:()=>{const t=window.location.href,o=["```python",e?e.getValue():"","```","",`Python: ${n}`,"","\x3c!-- Describe your bug --\x3e"].join("\n"),r=`https://github.com/facebook/pyrefly/issues/new?template=issue_template.yml&labels=bug&title=${encodeURIComponent("Bug Report")}&sandbox=${encodeURIComponent(t)}`,i=r+`&description=${encodeURIComponent(o)}`;if(i.length<=1800)return window.open(i,"_blank","noopener,noreferrer"),Promise.resolve();{const e=r+`&description=${encodeURIComponent("\x3c!-- Code is too long to include here. Please paste the smallest reproducible snippet (\u226430 lines), include your Python version, and briefly describe expected vs actual behavior. --\x3e")}`;return window.open(e,"_blank","noopener,noreferrer"),Promise.resolve()}},defaultLabel:"\u26a0\ufe0f Report Issue",runningLabel:"\u26a0\ufe0f Report Issue",ariaLabel:"report issue on GitHub"})}function G(e){let{model:n}=e;const t=(0,r.default)("sandbox/");return(0,l.jsx)(c,{id:"open-sandbox-button",onClick:async()=>{if(n){const e=n.getValue(),o=m.compressToEncodedURIComponent(e),r=t+`?code=${o}`;window.location.href=r}return Promise.resolve()},defaultLabel:"\ud83e\uddea Open in Sandbox",runningLabel:"\u23f3 Opening Sandbox...",ariaLabel:"open in sandbox"})}function H(e,n,t){return(0,l.jsx)(p,{runPython:e,pyodideStatus:n,setPyodideStatus:t})}function W(e){return(0,l.jsx)(c,{id:"copy-code-button",onClick:async()=>{if(e){const n=e.getValue();await navigator.clipboard.writeText(n)}return Promise.resolve()},defaultLabel:"\ud83d\udccb Copy",runningLabel:"\u2713 Copied!",ariaLabel:"copy code to clipboard"})}function Z(e,n,t,o,r,i){return(0,l.jsx)(c,{id:"reset-button",onClick:async()=>{if(e){if(e.setValue(t),!o){const e={};r.forEach(((n,o)=>{e[o]=o===i?t:n.getValue()})),F(e,i)}n()}},defaultLabel:"\ud83d\udd04 Reset",runningLabel:"\u2713 Reset!",ariaLabel:"reset to default code"})}function K(e,n,t,o,r){return async i=>{if(i)if(e("output"),o.size>1){const e={};o.forEach(((n,t)=>{e[t]=n.getValue()})),await t(r,e)}else{const e=i.getValue();await n(e)}}}const J={buttonContainerBase:{position:"x10l6tqk",display:"x78zum5",zIndex:"x1n327nk",gap:"x167g77z",rowGap:null,columnGap:null,$$css:!0},mobileButtonContainerCodeSnippet:{bottom:"x191j7n5",right:"xn5hqff",insetInlineStart:null,insetInlineEnd:null,$$css:!0},mobileButtonContainerSandbox:{bottom:"x191j7n5",right:"xn5hqff",insetInlineStart:null,insetInlineEnd:null,flexDirection:"xdt5ytf",$$css:!0},desktopButtonContainer:{top:"xmhk92p",right:"xk6ci0l",insetInlineStart:null,insetInlineEnd:null,$$css:!0},hiddenButtonContainer:{opacity:"xg01cxk",visibility:"xlshs6z",transition:"x17ce4s4",transitionBehavior:null,transitionDelay:null,transitionDuration:null,transitionProperty:null,transitionTimingFunction:null,$$css:!0},visibleButtonContainer:{opacity:"x1hc1fzr",visibility:"xnpuxes",transition:"x17ce4s4",transitionBehavior:null,transitionDelay:null,transitionDuration:null,transitionProperty:null,transitionTimingFunction:null,$$css:!0}}},75812:(e,n,t)=>{t.d(n,{R:()=>r,Y:()=>o});let o=function(e){return e.CLICK="click",e.HOVER="hover",e}({});function r(e,n){"undefined"!=typeof window&&window.gtag&&window.gtag("event",e,n)}}}]);