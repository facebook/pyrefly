"use strict";(globalThis.webpackChunknew_website=globalThis.webpackChunknew_website||[]).push([[9636],{29636(e,t,n){n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>y,frontMatter:()=>o,metadata:()=>i,toc:()=>d});var i=n(17477),a=n(74848),r=n(28453);const o={title:"Fly through data validation with Pyrefly\u2019s new Pydantic integration",description:"Pydantic is a data validation and data parsing library for Python. Pyrefly now supports Pydantic, allowing you to easily validate your data and get type errors before you run your code.",slug:"pyrefly-pydantic",authors:["abbym","zeinam","rebeccachen"],tags:["pydantic","typechecking","IDE"],image:"https://pyrefly.org/assets/images/pydantic-blog-6b683fc8f527ef950de38ee168925b51.png",hide_table_of_contents:!1},s=void 0,l={authorsImageUrls:[void 0,void 0,void 0]},d=[{value:"<strong>Background - Pydantic Basics</strong>",id:"background---pydantic-basics",level:2},{value:"<strong>Pyrefly &amp; Pydantic - How it works</strong>",id:"pyrefly--pydantic---how-it-works",level:2},{value:"Automatic Recognition - Write Pydantic-ally while Pyrefly gets out the way",id:"automatic-recognition---write-pydantic-ally-while-pyrefly-gets-out-the-way",level:3},{value:"<strong>Getting Started</strong>",id:"getting-started",level:2},{value:"<strong>Conclusion</strong>",id:"conclusion",level:2}];function c(e){const t={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{src:n(10252).A+"",width:"1279",height:"715"})}),"\n",(0,a.jsx)(t.p,{children:"We\u2019re excited to share that experimental support for Pydantic is now available in Pyrefly! This integration aims to provide a seamless, out-of-the-box experience, allowing you to statically validate your Pydantic code as you type, rather than solely at runtime. No plugins or manual configuration required!"}),"\n",(0,a.jsx)(t.p,{children:"Supporting third-party packages like Pydantic in a language server or type checker is a non-trivial challenge. Unlike the Python standard library, third-party packages may introduce their own conventions, dynamic behaviors, and runtime logic that can be difficult to analyze statically. Many type checkers either require plugins (like Mypy\u2019s Pydantic plugin) or offer only limited support for these types of projects. At the time of writing, Mypy is currently the only other major typechecker that provides robust support for Pydantic."}),"\n",(0,a.jsxs)(t.p,{children:["Read on to learn more about how this works and how to get started, or watch the ",(0,a.jsx)(t.a,{href:"https://www.youtube.com/watch?v=zXYpSQB57YI",children:"video"}),"!"]}),"\n",(0,a.jsx)(t.h2,{id:""}),"\n",(0,a.jsx)(t.h2,{id:"background---pydantic-basics",children:(0,a.jsx)(t.strong,{children:"Background - Pydantic Basics"})}),"\n",(0,a.jsxs)(t.p,{children:["Pydantic leverages type annotations for data validation and parsing. Similar to Python\u2019s built-in ",(0,a.jsx)(t.code,{children:"dataclasses"}),", it helps you create structured data containers in your code. But Pydantic takes it a step further by providing extensive runtime data validation, ensuring that data matches the expected types and formats as soon as it\u2019s instantiated."]}),"\n",(0,a.jsx)(t.p,{children:"For example:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-py",children:'from pydantic import BaseModel, Field\n\nclass User(BaseModel):\n    id: int\n    name: str = Field(..., min_length=1)\n    email: str\n\n# Example usage\nuser = User(id=123, name="Alice", email="alice@example.com")\nprint(user)\n'})}),"\n",(0,a.jsxs)(t.p,{children:["Using the code above, if you were to create a User instance, Pydantic would automatically validate the types and constraints. So if you pass invalid data (e.g., ",(0,a.jsx)(t.code,{children:'name=""'})," or ",(0,a.jsx)(t.code,{children:'id="not an int"'}),"), Pydantic will raise a ",(0,a.jsx)(t.code,{children:"ValidationError"})," at runtime."]}),"\n",(0,a.jsx)(t.h2,{id:"pyrefly--pydantic---how-it-works",children:(0,a.jsx)(t.strong,{children:"Pyrefly & Pydantic - How it works"})}),"\n",(0,a.jsx)(t.p,{children:"So how does Pyrefly work with Pydantic? For this initial experimental support we focused on delivering the following experiences:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Understands models and constructs"}),": Pyrefly supports core Pydantic features, including ",(0,a.jsx)(t.code,{children:"BaseModel"}),", ",(0,a.jsx)(t.code,{children:"Field"}),", ",(0,a.jsx)(t.code,{children:"ConfigDict"}),", as well as model-level configuration. No import errors or pesky red squiggles because your typechecker/language server doesn\u2019t understand what Pydantic is."]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Automatic Recognition"}),": Pyrefly detects Pydantic models and constructs out-of-the-box. There\u2019s no need to install plugins, add configuration files, or tweak settings. You can just write your Pydantic code and Pyrefly will handle the rest."]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Static Analysis That Reflects Runtime Logic:"})," One of the biggest challenges with Pydantic is that much of its validation and type coercion happens at runtime. Pyrefly\u2019s static analysis engine is built to reflect Pydantic\u2019s runtime logic as much as possible, ensuring that what you get in your IDE matches what will happen when your code runs."]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Immediate Feedback:"})," As you write and edit your models, Pyrefly provides instant type errors and warnings. This helps you catch mistakes early, reducing debugging time and improving code quality."]}),"\n"]}),"\n",(0,a.jsxs)(t.p,{children:["For the full list of supported Pydantic features check out the documentation ",(0,a.jsx)(t.a,{href:"https://pyrefly.org/en/docs/pydantic/#supported-features-with-examples",children:"here"}),"."]}),"\n",(0,a.jsx)(t.h3,{id:"automatic-recognition---write-pydantic-ally-while-pyrefly-gets-out-the-way",children:"Automatic Recognition - Write Pydantic-ally while Pyrefly gets out the way"}),"\n",(0,a.jsx)(t.p,{children:"Let's take a closer look at how Pyrefly works differently to other type checkers, particularly in its unobtrusive approach. A key illustration of this difference is Pyrefly's interpretation of strictness."}),"\n",(0,a.jsx)(t.p,{children:"Pydantic offers flexible validation modes to suit different use cases:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Lax (Default) Mode:"})," In this mode, Pydantic will automatically coerce types where possible. For example, if you pass ",(0,a.jsx)(t.code,{children:"\u201d123\u201d"}),"(a string) to a field expecting an int, Pydantic will convert (i.e. coerce) it to ",(0,a.jsx)(t.code,{children:"123"})," (an int). This is convenient for handling loosely-typed input, such as data from APIs or user forms."]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Strict Mode:"})," here Pydantic enforces exact types, no coercion is performed. If you pass a string to an integer field, you\u2019ll get a validation error. This is ideal for scenarios where data integrity is paramount."]}),"\n"]}),"\n",(0,a.jsxs)(t.p,{children:["The handy thing about Pyrefly is that it automatically respects your choices on this matter. It reads your model\u2019s configuration (such as ",(0,a.jsx)(t.code,{children:"ConfigDict"})," or model-level config) to determine which mode to apply. For example, in the following code we are explicitly setting the ",(0,a.jsx)(t.code,{children:"age"})," field using strict mode. Pyrefly inspects this statement directly and adapts its analysis to match your intent (in this case by reporting an error if a string age is passed)."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-py",children:'from pydantic import BaseModel, Field\n\n\nclass User(BaseModel):\n    name: str\n    age: int = Field(strict=True) # strict mode\n\n# Pyrefly will report an error here.\ny = User(name="Alice", age="30")\n'})}),"\n",(0,a.jsxs)(t.p,{children:["Another useful example of this can be seen with the use of extra parameters. Sometimes when writing Pydantic models you want to allow extra unspecified parameters when creating a model, and other times you want to explicitly forbid it (e.g. by using ",(0,a.jsx)(t.code,{children:"extra=forbid"}),"). Whether you\u2019re using either approach or a mix of both in your code, Pyrefly can pick it up automatically from how you\u2019ve written your Pydantic model:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-py",children:'# Lax mode: We can pass extra fields to our model by default\nclass ModelAllow(BaseModel):\nx: int\n\nModelAllow(x=1, y=2) # pyrefly won\'t report an error here\n\n# Strict mode: we can forbid extra fields\nclass ModelForbid(BaseModel, extra="forbid"):\nx: int\n\nModelForbid(x=1, y=2) # pyrefly will report an error here\n'})}),"\n",(0,a.jsxs)(t.p,{children:["Ultimately the value here is that you don\u2019t have to manage external configuration files or plugins to get your type checker to work with Pydantic. This is a different approach compared to say Mypy - which requires you to install a separate Pydantic plugin and configure it via your ",(0,a.jsx)(t.code,{children:"mypy.ini"})," or ",(0,a.jsx)(t.code,{children:"pyproject.toml"})," file."]}),"\n",(0,a.jsx)(t.h2,{id:"getting-started",children:(0,a.jsx)(t.strong,{children:"Getting Started"})}),"\n",(0,a.jsx)(t.p,{children:"There are no special configurations or plugins required to start using Pyrefly with Pydantic! The steps are as simple as:"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.a,{href:"https://docs.pydantic.dev/latest/install/",children:"Install Pydantic"})," (preferably v2)."]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.a,{href:"https://pyrefly.org/en/docs/installation/",children:"Install Pyrefly"})," (v0.33.0 or later)"]}),"\n",(0,a.jsx)(t.li,{children:"Write Pydantic models as usual."}),"\n",(0,a.jsx)(t.li,{children:"Run Pyrefly / use it in your IDE"}),"\n"]}),"\n",(0,a.jsxs)(t.p,{children:["Simple as that! If you\u2019d like to have a go playing around with a few examples, we created ",(0,a.jsx)(t.a,{href:"https://github.com/migeed-z/pyrefly-pydantic-demo",children:"a demo repo"})," that you can clone and try out."]}),"\n",(0,a.jsx)(t.h2,{id:"conclusion",children:(0,a.jsx)(t.strong,{children:"Conclusion"})}),"\n",(0,a.jsxs)(t.p,{children:["Pyrefly\u2019s Pydantic support is experimental and evolving, so you may encounter edge cases or features that aren\u2019t fully covered yet. We\u2019d like to strongly encourage you to try out Pydantic support in your projects and ",(0,a.jsx)(t.strong,{children:"let us know what works, what doesn\u2019t, and what you\u2019d like to see improved"}),"! Your insights and suggestions are invaluable in helping us refine this feature and prioritize enhancements. You can ",(0,a.jsx)(t.a,{href:"https://github.com/facebook/pyrefly/issues",children:"open an issue in our GitHub repo"})," or ",(0,a.jsx)(t.a,{href:"https://discord.gg/Cf7mFQtW7W",children:"connect with us on discord"})," if you have feedback to share."]}),"\n",(0,a.jsx)(t.p,{children:"Looking ahead, we\u2019re also working on expanding Pyrefly\u2019s capabilities to support additional third-party Python packages that are widely used in the ecosystem. We\u2019re currently focused on adding support for Django and SQLAlchemy, but if there\u2019s a particular library or framework you rely on, please let us know! Your suggestions and feedback will directly influence our roadmap and help make Pyrefly even better for the Python community."})]})}function y(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},10252(e,t,n){n.d(t,{A:()=>i});const i=n.p+"assets/images/pydantic-blog-6b683fc8f527ef950de38ee168925b51.png"},28453(e,t,n){n.d(t,{R:()=>o,x:()=>s});var i=n(96540);const a={},r=i.createContext(a);function o(e){const t=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),i.createElement(r.Provider,{value:t},e.children)}},17477(e){e.exports=JSON.parse('{"permalink":"/blog/pyrefly-pydantic","source":"@site/blog/2025-12-03-pyrefly-pydantic.md","title":"Fly through data validation with Pyrefly\u2019s new Pydantic integration","description":"Pydantic is a data validation and data parsing library for Python. Pyrefly now supports Pydantic, allowing you to easily validate your data and get type errors before you run your code.","date":"2025-12-03T00:00:00.000Z","tags":[{"inline":true,"label":"pydantic","permalink":"/blog/tags/pydantic"},{"inline":true,"label":"typechecking","permalink":"/blog/tags/typechecking"},{"inline":true,"label":"IDE","permalink":"/blog/tags/ide"}],"readingTime":5.565,"hasTruncateMarker":true,"authors":[{"name":"Abby Mitchell","url":"https://github.com/javabster","key":"abbym","page":null},{"name":"Zeina Migeed","url":"https://github.com/migeed-z","key":"zeinam","page":null},{"name":"Rebecca Chen","url":"https://github.com/rchen152","key":"rebeccachen","page":null}],"frontMatter":{"title":"Fly through data validation with Pyrefly\u2019s new Pydantic integration","description":"Pydantic is a data validation and data parsing library for Python. Pyrefly now supports Pydantic, allowing you to easily validate your data and get type errors before you run your code.","slug":"pyrefly-pydantic","authors":["abbym","zeinam","rebeccachen"],"tags":["pydantic","typechecking","IDE"],"image":"https://pyrefly.org/assets/images/pydantic-blog-6b683fc8f527ef950de38ee168925b51.png","hide_table_of_contents":false},"unlisted":false,"prevItem":{"title":"4 Pyrefly Type Narrowing Patterns that make Type Checking more Intuitive","permalink":"/blog/type-narrowing"},"nextItem":{"title":"Pyrefly Beta is here!","permalink":"/blog/pyrefly-beta"}}')}}]);