"use strict";(self.webpackChunknew_website=self.webpackChunknew_website||[]).push([[5572],{5572:(e,n,t)=>{t.r(n),t.d(n,{createRunPythonCodeFunction:()=>J,default:()=>_,initializePyreflyWasm:()=>U});var o=t(96540),r=t(29030),s=t(8532),i=t(32855),a=t(75812),l=t(74848);const u=40;function x(e,n){e(!0);const t=new Promise((e=>{setTimeout((()=>{e()}),1e3)}));return Promise.all([n(),t]).then((()=>{e(!1)}))}function c(e){let{id:n,onClick:t,defaultLabel:r,runningLabel:s,ariaLabel:i,isRunning:u,setIsRunning:c}=e;void 0!==u&&void 0!==c||([u,c]=(0,o.useState)(!1));const d=u;return(0,l.jsx)("button",{id:n,...{0:{className:"x78zum5 x6s0dn4 x1khhgft x1ypdohk x169l3ba xfo81ep xpivpjv x1vqgdyp x1aq8l9j x1v03e3n x1789zll x1com5t6 x1eqz52 x66in4q x1heor9g x1q0gjfv xxxer0w x1fh9xkg x1ru2czo"},2:{className:"x78zum5 x6s0dn4 x1khhgft x1ypdohk x169l3ba xfo81ep xpivpjv x1vqgdyp x1aq8l9j x1v03e3n x1789zll x1com5t6 x9yugl5 x1awj2ng xrynbky x1q0gjfv x1rpuqfj x4afe7t x1debuo4 x1jutyc x187oe4h x1fh9xkg x1ru2czo"},1:{className:"x78zum5 x6s0dn4 x1khhgft x169l3ba xfo81ep xpivpjv x1vqgdyp x1aq8l9j x1v03e3n x1789zll x1com5t6 x1eqz52 x66in4q x1heor9g x1q0gjfv xxxer0w x1fh9xkg x1ru2czo x1h6gzvc"},3:{className:"x78zum5 x6s0dn4 x1khhgft x169l3ba xfo81ep xpivpjv x1vqgdyp x1aq8l9j x1v03e3n x1789zll x1com5t6 x9yugl5 x1awj2ng xrynbky x1q0gjfv x1rpuqfj x4afe7t x1debuo4 x1jutyc x187oe4h x1fh9xkg x1ru2czo x1h6gzvc"}}[!!u<<1|!!d],onClick:async function(){if(!d){(0,a.R)(a.Y.CLICK,{button_id:n});try{x(c,t)}catch(e){console.error("Error in button action:",e)}}},"aria-label":i||n,disabled:d,onMouseEnter:()=>(0,a.R)(a.Y.HOVER,{button_id:n}),children:(0,l.jsx)("span",{className:"xmtou6a",children:u?s:r})})}let d=function(e){return e.NOT_INITIALIZED="not_initialized",e.INITIALIZING="initializing",e.RUNNING="running",e.FINISHED_RUNNING="finished_running",e}({});function p(e){let{runPython:n,pyodideStatus:t,setPyodideStatus:o}=e;const r=t===d.INITIALIZING||t===d.RUNNING;return(0,l.jsx)(c,{id:"run-python-button",onClick:n,defaultLabel:"\u25b6\ufe0f Run",runningLabel:"\u23f3 Running...",ariaLabel:"run Python code button",isRunning:r,setIsRunning:e=>{o(e?d.RUNNING:d.FINISHED_RUNNING)}})}var h=t(68553),f=t(32992);function m(e){let{error:n,goToDef:t}=e;const{startLineNumber:o,startColumn:s,endLineNumber:i,endColumn:a}=n;let u;u=o===i?s===a?`${o}:${s}`:`${o}:${s}-${a}`:`${o}:${s}-${i}:${a}`;const x=(0,l.jsx)("a",{href:(0,r.default)(`en/docs/error-kinds/#${n.kind}`),target:"_blank",rel:"noopener noreferrer",children:n.kind});return(0,l.jsxs)("span",{className:"x1ypdohk",onClick:()=>t(o,s,i,a),children:[2==n.severity?(0,l.jsxs)("span",{className:"x1s8ghek",children:[" ","INFO"," "]}):4==n.severity?(0,l.jsxs)("span",{className:"xburs04",children:[" ","WARN"," "]}):(0,l.jsxs)("span",{className:"x1x2k2ee",children:["ERROR"," "]}),`${u}: ${n.message_header} `,"[",x,"]",n.message_details&&"\n"+n.message_details]})}function g(e){let{loading:n,goToDef:t,errors:o,internalError:r,pythonOutput:s,pyodideStatus:i,activeTab:a,setActiveTab:u=()=>{}}=e;const x=a,c=null!=o&&o.length>0;return(0,l.jsxs)("div",{id:"sandbox-results-container",className:"xh2ww80 x1n2onr6 xfifm61 x1eqz52 xr44f5h",children:[(0,l.jsx)("div",{className:"x78zum5 x1eqz52 xc7mbzt xif65rj",children:(0,l.jsxs)("ul",{className:"x78zum5 xe8uvvx x1ghz6dp x1717udv x67bb7w",children:[(0,l.jsx)("li",{...{0:{className:"x1tc92mu x1ypdohk x117nqv4 x7pa710"},1:{className:"x1tc92mu x1ypdohk x117nqv4 x7pa710 x1eqz52 x16u9nvt x1jyxor1"}}[!("errors"!==x)|0],onClick:()=>u("errors"),children:"Type Checking Errors"}),(0,l.jsx)("li",{...{0:{className:"x1tc92mu x1ypdohk x117nqv4 x7pa710"},1:{className:"x1tc92mu x1ypdohk x117nqv4 x7pa710 x1eqz52 x16u9nvt x1jyxor1"}}[!("output"!==x)|0],onClick:()=>u("output"),children:"Runtime Output"})]})}),(0,l.jsxs)("div",{className:"xysyzu8 x1io82uz",children:[n&&(0,l.jsx)("div",{children:(0,l.jsxs)("div",{className:"x78zum5 xl56j7k x1anpbxc",children:[(0,l.jsx)("div",{className:"x6jxa94 x1v9usgg x18t7k3x xorixrz x1bo1o3z x1sbju2s xa4qsjk x4hg4is x1u6ievf xkf7kw9"}),(0,l.jsx)("div",{className:"x6jxa94 x1v9usgg x18t7k3x xorixrz x1bo1o3z x1sbju2s xa4qsjk x4hg4is x1u6ievf xlzs402"}),(0,l.jsx)("div",{className:"x6jxa94 x1v9usgg x18t7k3x xorixrz x1bo1o3z x1sbju2s xa4qsjk x4hg4is x1u6ievf"})]})}),!n&&"errors"===x&&(0,l.jsx)("pre",{className:"xknfcqp x1awh872 xat24cr x1eqz52 xh8yej3 x126k92a x13faqbe x1lliihq",children:(0,l.jsx)("ul",{className:"xe8uvvx x1ghz6dp x1717udv",children:c?o.map(((e,n)=>(0,l.jsx)("li",{...{0:{},1:{className:"x1anpbxc x889kno x19j24cx x1eqz52"}}[!!(n>0)|0],children:(0,l.jsx)(m,{error:e,goToDef:t},n)},n))):(0,l.jsx)("li",{children:r?`Pyrefly encountered an internal error: ${r}.`:null==o?"Pyrefly failed to fetch errors.":0===o?.length?"No errors!":null})})}),"output"===x&&(0,l.jsxs)("pre",{className:"xknfcqp x1awh872 xat24cr x1eqz52 xh8yej3 x126k92a x13faqbe x1lliihq",children:[(0,l.jsx)("span",{className:"x14qql8p",children:"Note: The Python runtime currently only supports features up to Python version 3.12, features from newer versions are not available. \n\n"}),i===d.NOT_INITIALIZED?"No output, please press the \u25b6\ufe0f Run button.":i===d.INITIALIZING?"Loading Python interpreter...":i===d.RUNNING?"Running...":s.trimStart()]})]})]})}var y=t(84138);const b=(e,n)=>{throw"not implemented"},v=new Map;const j=(e,n)=>null,k=new Map;const N=(e,n)=>null,z=new Map;const w=()=>[],C=new Map;y.languages.register({id:"python",extensions:[".py"],aliases:["Python"]}),y.languages.registerCompletionItemProvider("python",{triggerCharacters:[".","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","[",'"',"'"],provideCompletionItems(e,n){try{const t=v.get(e)??b;return{suggestions:t(n.lineNumber,n.column).map((e=>({...e,insertText:e.label.toString()})))}}catch(t){return console.error(t),null}}}),y.languages.registerDefinitionProvider("python",{provideDefinition(e,n){try{const t=(k.get(e)??j)(n.lineNumber,n.column);return null!=t?{uri:e.uri,range:t}:null}catch(t){return console.error(t),null}}}),y.languages.registerHoverProvider("python",{provideHover:(e,n)=>(z.get(e)??N)(n.lineNumber,n.column)}),y.languages.registerInlayHintsProvider("python",{provideInlayHints:e=>({hints:(C.get(e)??w)(),dispose:()=>{}})}),h.wG.config({monaco:y});const q="\n# Welcome to the Pyrefly Sandbox, this is a page\n# where you can write, share and learn about typing in Python.\n#\n# Here are a couple features of this sandbox:\n# - Get real-time type checking feedback\n# - Use reveal_type() to inspect inferred types\n# - experiment with the IDE features that we support (e.g. autocomplete, go-to-definition, hover, etc)\n# - Write and run Python code directly in your browser\n\nfrom typing import *\nfrom utils import format_number\n\ndef test(x: int):\n  return format_number(x)\n\n# reveal_type will produce a type error that tells you the type Pyrefly has\n# computed for the return (in this case, str)\nreveal_type(test(42))\n".trimStart(),I='\n# Utility functions\n\ndef format_number(x: int) -> str:\n    return f"Number: {x}"\n'.trimStart();let S=null,P=null,R=null;const L=async e=>{if(S&&R)return R(""),new Promise((n=>{P=n,S?.postMessage(e)}));console.error("Python worker not initialized. Call initializePythonWorker first.")},E=async(e,n)=>{if(S&&R)return R(""),new Promise((t=>{P=t;const o={activeFile:e,allFiles:n};S?.postMessage(o)}));console.error("Python worker not initialized. Call initializePythonWorker first.")},$=e=>{let{setPythonOutput:n,setPyodideStatus:r}=e;return(0,o.useEffect)((()=>(null===S&&((e,n)=>{if(null!==S)return;R=e;const o=new Worker(new URL(t.p+t.u(8123),t.b),{type:void 0});o.onmessage=t=>{const o=t.data;switch(o.type){case"stdout":case"stderr":return void e((e=>e+"\n"+o.output));case"pyodideStatusUpdate":return void n(o.status);case"runPython":return!o.success&&o.error&&e((e=>e+"\n"+`Error: ${o.error}`)),void(P&&(P(),P=null));default:console.error(`Unknown message type received from worker: ${o}`)}},S=o})(n,r),()=>{})),[n,r]),{runPython:L,runMultiFilePython:E}},M=["3.8","3.9","3.10","3.11","3.12","3.13","3.14"];function T(e){let{selectedVersion:n,onVersionChange:t,loading:o}=e;return(0,l.jsx)("div",{className:"x153ncpu x66in4q x1khhgft x18t7k3x x1heor9g xjb2p0i x1ypdohk x1a2a7pz x1i9suas x1q0gjfv xxxer0w x1fh9xkg x1ru2czo xfqoyci x1s07b3s",children:(0,l.jsx)("select",{className:"x1gs6z28 x1a2a7pz xh8yej3 x5yr21d xjbqb8w xy13l1i x9f619 x1lliihq",value:n,onChange:e=>t(e.target.value),disabled:o,"aria-label":"Select Python version",children:M.map((e=>(0,l.jsxs)("option",{value:e,children:["Python ",e]},e)))})})}async function U(){const e="undefined"!=typeof window?t.e(3190).then(t.bind(t,93190)):new Promise((e=>{}));try{const n=await e;return await n.default(),await n}catch(n){throw console.error(n),n}}let F=null;function _(e){let{sampleFilename:n,isCodeSnippet:t=!1,codeSample:r=q,isInViewport:s=!0}=e;const a=(0,o.useRef)(null),[c,p]=(0,o.useState)([]),[h,m]=(0,o.useState)(""),[b,j]=(0,o.useState)(!0),[N,w]=(0,o.useState)(null),[S,P]=(0,o.useState)(null),[R,L]=(0,o.useState)(new Map),[E,M]=(0,o.useState)("sandbox.py"),[_,Q]=(0,o.useState)(null),[X,ee]=(0,o.useState)(""),[ne,te]=(0,o.useState)(d.NOT_INITIALIZED),[oe,re]=(0,o.useState)(""),[se,ie]=(0,o.useState)("errors"),[ae,le]=(0,o.useState)(!1),[ue,xe]=(0,o.useState)("3.12"),ce=R.get(E)||null,de=(0,o.useCallback)((function(e,n){void 0===n&&(n="");const t=y.editor.getModels().find((n=>n.uri.path===`/${e}`));let o;t?(t.setValue(n),o=t):o=y.editor.createModel(n,"python",y.Uri.file(`/${e}`)),L((n=>new Map(n).set(e,o))),M(e)}),[]),pe=(0,o.useCallback)((e=>{if(R.has(e)){M(e);const n=a.current,t=R.get(e);n&&t&&n.setModel(t),N&&N.setActiveFile(e)}}),[R,N]),he=(0,o.useCallback)((()=>{if(_)return;let e=1,n="untitled.py";for(;R.has(n);)n=`untitled${e}.py`,e++;de(n,"# New Python file\n"),Q(n),ee("")}),[R,de,_]),fe=(0,o.useCallback)(((e,n)=>{if(!n.trim()||R.has(n))return!1;const t=n.endsWith(".py")?n:`${n}.py`;if(R.has(t))return!1;const o=R.get(e);if(!o)return!1;const r=y.editor.createModel(o.getValue(),"python",y.Uri.file(`/${t}`)),s=a.current;return E===e&&s&&s.setModel(r),L((n=>{const o=new Map(n);return o.delete(e),o.set(t,r),o})),E===e&&M(t),setTimeout((()=>{o.dispose()}),100),!0}),[R,E]),me=(0,o.useCallback)(((e,n)=>{if(!e.trim())return!1;const t=e.trim().endsWith(".py")?e.trim():`${e.trim()}.py`;return t===n||!R.has(t)}),[R]),ge=(0,o.useCallback)((()=>{if(!_)return;if(!me(X,_))return;fe(_,X.trim())&&(Q(null),ee(""))}),[_,X,fe,me]),ye=(0,o.useCallback)((e=>{if("sandbox.py"===e)return!1;const n=R.get(e);if(!n)return!1;if(L((n=>{const t=new Map(n);return t.delete(e),t})),E===e){M("sandbox.py");const e=a.current,n=R.get("sandbox.py");e&&n&&e.setModel(n)}return _===e&&(Q(null),ee("")),setTimeout((()=>{n.dispose()}),100),!0}),[R,E,_]),be=()=>(0,l.jsxs)("div",{className:"x78zum5 x1eqz52 xc7mbzt xif65rj xejiqos xjblrfn x6s0dn4",children:[Array.from(R.keys()).map((e=>(0,l.jsx)("div",{className:"x78zum5 x6s0dn4",children:_===e?(0,l.jsxs)("div",{...{0:{className:"x78zum5 x6s0dn4 xdqdrvq x18t7k3x x1e13svl x18zih8k x10d6zji"},1:{className:"x78zum5 x6s0dn4 xdqdrvq x18t7k3x x1e13svl x18zih8k x10d6zji xkuhdyg"}}[!me(X,e)|0],children:[(0,l.jsx)("input",{className:"x1gs6z28 x1md70p1 xiuzu7u xif65rj x117nqv4 x1a2a7pz x6c5l4p x16q51m2",value:X,onChange:e=>ee(e.target.value),onKeyDown:e=>{"Enter"===e.key||e.ctrlKey&&"s"===e.key?(e.preventDefault(),ge()):"Escape"===e.key&&(Q(null),ee(""))},onBlur:ge,placeholder:"Enter filename",autoFocus:!0}),(0,l.jsx)("span",{className:"xv1l7n4 xif65rj x117nqv4 x1swdo50",children:".py"})]}):(0,l.jsx)("button",{onClick:()=>pe(e),...{0:{className:"x1tc92mu x1ypdohk x117nqv4 x7pa710 x1gs6z28 xjbqb8w xiuzu7u xif65rj xahlotz"},1:{className:"x1tc92mu x1ypdohk x117nqv4 x7pa710 x1gs6z28 xiuzu7u xif65rj xahlotz x1eqz52 x16u9nvt x1jyxor1"}}[!(e!==E)|0],children:e})},e))),(0,l.jsxs)("div",{className:"x78zum5 x6s0dn4 x1jnr06f xet2fuk",children:[_?(0,l.jsx)("button",{onClick:ge,...{0:{className:"x1gs6z28 x1md70p1 xiuzu7u x1ypdohk x2lkgqm x1j61zf2 x117nqv4 x12oqio5 x46jg8d x78zum5 x6s0dn4 xl56j7k x15otokf x12602er"},1:{className:"x1gs6z28 x1md70p1 xiuzu7u x2lkgqm x1j61zf2 x117nqv4 x12oqio5 x46jg8d x78zum5 x6s0dn4 xl56j7k xti2d7y x1h6gzvc x1n5bzlp x8joddd"}}[!me(X,_)|0],title:me(X,_)?"Save file name":"Invalid filename",disabled:!me(X,_),children:"\u2713"}):(0,l.jsx)("button",{onClick:he,className:"x1gs6z28 x1md70p1 xiuzu7u x1ypdohk x2lkgqm x1j61zf2 x117nqv4 x12oqio5 x46jg8d x78zum5 x6s0dn4 xl56j7k x15otokf",title:"Add new file",children:"+"}),(0,l.jsx)("button",{onClick:()=>ye(E),...{0:{className:"x1gs6z28 x1md70p1 xiuzu7u x1ypdohk x2lkgqm x117nqv4 x12oqio5 x46jg8d x78zum5 x6s0dn4 xl56j7k x15otokf xosj86m xnj1at0"},1:{className:"x1gs6z28 x1md70p1 xiuzu7u x2lkgqm x117nqv4 x12oqio5 x46jg8d x78zum5 x6s0dn4 xl56j7k xosj86m xti2d7y x1h6gzvc x1n5bzlp x8joddd"}}[!("sandbox.py"!==E)|0],title:"sandbox.py"===E?"Cannot delete sandbox.py":"Delete file",disabled:"sandbox.py"===E,children:"\xd7"})]})]});function ve(){if(null!=ce&&null!=N){!function(e,n){v.set(e,n)}(ce,((e,n)=>N.autoComplete(e,n))),function(e,n){k.set(e,n)}(ce,((e,n)=>N.gotoDefinition(e,n))),function(e,n){z.set(e,n)}(ce,((e,n)=>N.queryType(e,n))),function(e,n){C.set(e,n)}(ce,(()=>N?.inlayHint()||[]));try{if(R.size>1){const e=ce.getValue();N.updateSingleFile(E,e),N.setActiveFile(E)}else{const e=ce.getValue();N.updateSingleFile(E,e)}const e=N.getErrors();R.forEach((e=>{y.editor.setModelMarkers(e,"default",[])}));const n=new Map;e.forEach((e=>{const t=e.filename||E;n.has(t)||n.set(t,[]),n.get(t).push(e)})),n.forEach(((e,n)=>{const t=R.get(n);t&&y.editor.setModelMarkers(t,"default",function(e){return e.map((e=>{const n=e.message_details?`${e.message_header}\n${e.message_details}`:e.message_header;return{startLineNumber:e.startLineNumber,startColumn:e.startColumn,endLineNumber:e.endLineNumber,endColumn:e.endColumn,message:n,severity:e.severity}}))}(e))})),m(""),p(e)}catch(e){console.error(e),m(JSON.stringify(e)),p([])}}}(0,o.useEffect)((()=>{if(0===R.size){const e=function(e,n,t){const o=function(){if("undefined"==typeof window)return null;const e=new URLSearchParams(window.location.search),n=e.get("project");if(n)try{const e=f.decompressFromEncodedURIComponent(n);return e?JSON.parse(e):null}catch(o){console.error("Failed to parse project from URL:",o)}const t=e.get("code");if(t){const e=f.decompressFromEncodedURIComponent(t);if(e)return{files:{"sandbox.py":e},activeFile:"sandbox.py"}}return null}();if(!o)return!1;y.editor.getModels().forEach((e=>e.dispose())),t(new Map),Object.entries(o.files).forEach((n=>{let[t,o]=n;e(t,o)})),o.activeFile&&o.files[o.activeFile]&&n(o.activeFile);return!0}(de,M,L);e||(t?(de(n,r),M(n)):(de("sandbox.py",q),de("utils.py",I),M("sandbox.py")))}}),[de,R.size,t,n,r]),(0,o.useEffect)((()=>{const e=function(){if("undefined"==typeof window)return null;return new URLSearchParams(window.location.search).get("version")}();e&&xe(e)}),[]),(0,o.useEffect)((()=>{s&&(j(!0),F||(F=U()),F.then((e=>{try{w(new e.State(ue)),j(!1),m("")}catch(n){j(!1),m(`Failed to initialize with Python ${ue}: ${n}`)}})).catch((e=>{j(!1),m(JSON.stringify(e))})))}),[s,ue]),y.editor.onDidCreateModel((e=>{const n=O(E);n&&L((e=>new Map(e).set(E,n)))})),(0,o.useEffect)((()=>{const e=a.current,n=R.get(E);e&&n&&e.getModel()!==n&&e.setModel(n)}),[E,R]),(0,o.useEffect)((()=>{ve()}),[N,ce]),(0,o.useEffect)((()=>{if(R.size>0&&N&&ce){const e={};R.forEach(((n,t)=>{e[t]=n.getValue()})),Object.keys(e).length>0&&(N.updateSandboxFiles(e),N.setActiveFile(E)),setTimeout((()=>ve()),100)}}),[R.size,N,ce,E]);const{runPython:je,runMultiFilePython:ke}=$({setPythonOutput:re,setPyodideStatus:te}),Ne=J(ie,je,ke,R,E),ze=(0,o.useCallback)((async()=>{ce&&(te(d.RUNNING),await Ne(ce))}),[ce,ie,te]);const we=function(e,n,t,r,s,i,a,u,x,c,d,p){let h=[];h=e?[(0,l.jsx)(H,{model:n}),Z(n),D()?null:K(n,i,a,e,u,d,p)].filter(Boolean):[W(t,r,s),G(),K(n,i,a,e,u,d,p),A(n,u),(0,l.jsx)(T,{selectedVersion:u,onVersionChange:x,loading:c})];return h.map(((n,t)=>o.cloneElement(n,{key:`button-${t}`,...!e&&D()?{className:{className:"x1i06gni x1i8vjtc"}}:{}})))}(t,ce,ze,ne,te,ve,r,ue,(e=>{if(xe(e),R.size>0&&!t){const n={};R.forEach(((e,t)=>{n[t]=e.getValue()})),V(n,E,e)}}),b,R,E);return(0,l.jsxs)("div",{id:"sandbox-editor",...{0:{className:"x78zum5 xdt5ytf x98rzlu"},1:{className:"x78zum5 xdt5ytf x98rzlu x1awh872"}}[!(t||D())|0],children:[!t&&(0,l.jsx)(be,{}),(0,l.jsxs)("div",{id:"sandbox-code-editor-container",...{0:{className:"x1n2onr6 x78zum5 x1rea2x4 x7hct1x x1eqz52 x5yr21d"},2:{className:"x1n2onr6 x78zum5 x1rea2x4 x7hct1x x1eqz52 x5yr21d x66in4q x16eypsj"},1:{className:"x1n2onr6 x78zum5 x1rea2x4 x7hct1x x1eqz52 x5yr21d x1ci220x x76ihet x1olqv08 xhbaxng x1iorvi4"},3:{className:"x1n2onr6 x78zum5 x1rea2x4 x7hct1x x1eqz52 x5yr21d x16eypsj x1ci220x x76ihet x1olqv08 xhbaxng x1iorvi4"}}[!!t<<1|!t],onMouseEnter:()=>le(!0),onMouseLeave:()=>le(!1),children:[B(t,E,ce?.getValue()||r,ve,(function(e){const n=O(E);if(n&&L((e=>new Map(e).set(E,n))),t){const n=D()?u+5:0;P(Math.max(50,e.getContentHeight()+n))}a.current=e,e.addCommand(y.KeyMod.CtrlCmd|y.KeyCode.Enter,(()=>{if(!t&&ne!==d.INITIALIZING&&ne!==d.RUNNING){const n=e.getModel();n&&x((e=>te(e?d.RUNNING:d.FINISHED_RUNNING)),(async()=>{await Ne(n)}))}}))}),S,ue,E,R),(0,l.jsx)("div",{...i.xk(Y.buttonContainerBase,D()?t?Y.mobileButtonContainerCodeSnippet:Y.mobileButtonContainerSandbox:Y.desktopButtonContainer,!t||ae||D()?Y.visibleButtonContainer:Y.hiddenButtonContainer),children:we})]}),!t&&(0,l.jsx)(g,{loading:b,goToDef:(e,n,t,o)=>{const r=a.current;if(null===r)return;const s={startLineNumber:e,startColumn:n,endLineNumber:t,endColumn:o};r.revealRange(s),r.setSelection(s)},errors:c,internalError:h,pythonOutput:oe,pyodideStatus:ne,activeTab:se,setActiveTab:ie})]})}function V(e,n,t){const o={files:e,activeFile:n},r=f.compressToEncodedURIComponent(JSON.stringify(o)),s=new URLSearchParams;s.set("project",r),t&&s.set("version",t);const i=`${window.location.pathname}?${s.toString()}`;window.history.replaceState({},"",i)}function O(e){const n=y.editor.getModels().filter((n=>n?.uri?.path===`/${e}`))[0];return null==n?null:(n.setValue(n.getValue()),n.updateOptions({tabSize:4,insertSpaces:!0}),n)}function D(){return/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)}function B(e,n,t,o,r,i,a,u,x){const{colorMode:c}=s.G(),d="dark"===c?"vs-dark":"vs-light";if(e)return(0,l.jsx)(h.Ay,{defaultPath:n,defaultValue:t,defaultLanguage:"python",theme:d,onChange:o,onMount:r,keepCurrentModel:!0,height:i,options:{readOnly:D(),domReadOnly:D(),minimap:{enabled:!1},hover:{enabled:!0,above:!1},scrollBeyondLastLine:!1,overviewRulerBorder:!1}});{const s=window.innerHeight,i=document.querySelector(".navbar"),c=75*(s-(i?.offsetHeight||0))/100;return(0,l.jsx)(h.Ay,{defaultPath:n,defaultValue:t,defaultLanguage:"python",theme:d,onChange:n=>{if(o(),"string"==typeof n&&!e){const e={};x.forEach(((t,o)=>{e[o]=o===u?n:t.getValue()})),V(e,u,a)}},onMount:r,keepCurrentModel:!0,height:c,options:{readOnly:!1,domReadOnly:!1,minimap:{enabled:!1},hover:{enabled:!0,above:!1},scrollBeyondLastLine:!1,overviewRulerBorder:!1}})}}function G(){return(0,l.jsx)(c,{id:"share-url-button",onClick:()=>{const e=window.location.href;return navigator.clipboard.writeText(e)},defaultLabel:"\ud83d\udccb Share URL",runningLabel:"\u2713 URL Copied!",ariaLabel:"share URL button"})}function A(e,n){return(0,l.jsx)(c,{id:"github-issues-button",onClick:()=>{const t=window.location.href,o=["```python",e?e.getValue():"","```","",`Python: ${n}`,"","\x3c!-- Describe your bug --\x3e"].join("\n"),r=`https://github.com/facebook/pyrefly/issues/new?template=issue_template.yml&labels=bug&title=${encodeURIComponent("Bug Report")}&sandbox=${encodeURIComponent(t)}`,s=r+`&description=${encodeURIComponent(o)}`;if(s.length<=1800)return window.open(s,"_blank","noopener,noreferrer"),Promise.resolve();{const e=r+`&description=${encodeURIComponent("\x3c!-- Code is too long to include here. Please paste the smallest reproducible snippet (\u226430 lines), include your Python version, and briefly describe expected vs actual behavior. --\x3e")}`;return window.open(e,"_blank","noopener,noreferrer"),Promise.resolve()}},defaultLabel:"\u26a0\ufe0f Report Issue",runningLabel:"\u26a0\ufe0f Report Issue",ariaLabel:"report issue on GitHub"})}function H(e){let{model:n}=e;const t=(0,r.default)("sandbox/");return(0,l.jsx)(c,{id:"open-sandbox-button",onClick:async()=>{if(n){const e=n.getValue(),o=f.compressToEncodedURIComponent(e),r=t+`?code=${o}`;window.location.href=r}return Promise.resolve()},defaultLabel:"\ud83e\uddea Open in Sandbox",runningLabel:"\u23f3 Opening Sandbox...",ariaLabel:"open in sandbox"})}function W(e,n,t){return(0,l.jsx)(p,{runPython:e,pyodideStatus:n,setPyodideStatus:t})}function Z(e){return(0,l.jsx)(c,{id:"copy-code-button",onClick:async()=>{if(e){const n=e.getValue();await navigator.clipboard.writeText(n)}return Promise.resolve()},defaultLabel:"\ud83d\udccb Copy",runningLabel:"\u2713 Copied!",ariaLabel:"copy code to clipboard"})}function K(e,n,t,o,r,s,i){return(0,l.jsx)(c,{id:"reset-button",onClick:async()=>{if(e){if(e.setValue(t),!o){const e={};s.forEach(((n,o)=>{e[o]=o===i?t:n.getValue()})),V(e,i,r)}n()}},defaultLabel:"\ud83d\udd04 Reset",runningLabel:"\u2713 Reset!",ariaLabel:"reset to default code"})}function J(e,n,t,o,r){return async s=>{if(s)if(e("output"),o.size>1){const e={};o.forEach(((n,t)=>{e[t]=n.getValue()})),await t(r,e)}else{const e=s.getValue();await n(e)}}}const Y={buttonContainerBase:{position:"x10l6tqk",display:"x78zum5",zIndex:"x1n327nk",gap:"x167g77z",rowGap:null,columnGap:null,$$css:!0},mobileButtonContainerCodeSnippet:{bottom:"x191j7n5",right:"xn5hqff",insetInlineStart:null,insetInlineEnd:null,$$css:!0},mobileButtonContainerSandbox:{bottom:"x191j7n5",right:"xn5hqff",insetInlineStart:null,insetInlineEnd:null,flexDirection:"xdt5ytf",$$css:!0},desktopButtonContainer:{top:"xmhk92p",right:"xk6ci0l",insetInlineStart:null,insetInlineEnd:null,$$css:!0},hiddenButtonContainer:{opacity:"xg01cxk",visibility:"xlshs6z",transition:"x17ce4s4",transitionBehavior:null,transitionDelay:null,transitionDuration:null,transitionProperty:null,transitionTimingFunction:null,$$css:!0},visibleButtonContainer:{opacity:"x1hc1fzr",visibility:"xnpuxes",transition:"x17ce4s4",transitionBehavior:null,transitionDelay:null,transitionDuration:null,transitionProperty:null,transitionTimingFunction:null,$$css:!0}}},75812:(e,n,t)=>{t.d(n,{R:()=>r,Y:()=>o});let o=function(e){return e.CLICK="click",e.HOVER="hover",e}({});function r(e,n){"undefined"!=typeof window&&window.gtag&&window.gtag("event",e,n)}}}]);