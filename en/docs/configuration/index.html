<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-configuration" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Configuration | Pyrefly</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://pyrefly.org/en/docs/configuration/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Configuration | Pyrefly"><meta data-rh="true" name="description" content="Configure Pyrefly settings and options"><meta data-rh="true" property="og:description" content="Configure Pyrefly settings and options"><link data-rh="true" rel="canonical" href="https://pyrefly.org/en/docs/configuration/"><link data-rh="true" rel="alternate" href="https://pyrefly.org/en/docs/configuration/" hreflang="en"><link data-rh="true" rel="alternate" href="https://pyrefly.org/en/docs/configuration/" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Pyrefly RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Pyrefly Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GSX14JC495"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-GSX14JC495",{anonymize_ip:!0})</script>











<link rel="stylesheet" href="/stylex.css">


<link rel="icon" href="/img/Pyrefly-Symbol.svg" type="image/svg" sizes="32x32" media="(prefers-color-scheme: light)">
<link rel="icon" href="/img/Pyrefly-Symbol-Invert.svg" type="image/svg" sizes="32x32" media="(prefers-color-scheme: dark)">
<meta property="og:image" content="/img/Pyrefly-Preview-Symbol.png">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<meta property="og:image:type" content="image/png">
<link rel="stylesheet" href="/css/code-block-buttons.css">
<script src="https://buttons.github.io/buttons.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
<script src="/js/code-block-buttons.js"></script><link rel="stylesheet" href="/assets/css/styles.2ccc2416.css">
<script src="/assets/js/runtime~main.c7979954.js" defer="defer"></script>
<script src="/assets/js/main.c75c0eff.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script>
<div style="display: none; text-align: center; background-color: white; color: black;" id="internaldocs-banner"></div><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/Pyrefly-Symbol.svg" alt="Pyrefly Logo" class="themedComponent_mlkZ themedComponent--light_NVdE" height="24" width="24"><img src="/img/Pyrefly-Symbol-Invert.svg" alt="Pyrefly Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="24" width="24"></div><b class="navbar__title text--truncate">Pyrefly</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/en/docs/">Docs</a><a class="navbar__item navbar__link" href="/en/docs/typing-for-python-developers/">Learn</a><a class="navbar__item navbar__link" href="/sandbox/">Sandbox</a><a class="navbar__item navbar__link" href="/en/docs/installation/">Install</a><a class="navbar__item navbar__link" href="/blog/">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/pyrefly" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar__icon github__link" aria-label="GitHub"></a><a href="https://discord.gg/Cf7mFQtW7W" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar__icon discord__link" aria-label="Discord"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite" aria-pressed="true"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/en/docs/typing-for-python-developers/">Learn Python Typing</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/en/docs/installation/">Getting Started</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/installation/">Installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/en/docs/configuration/">Configuration</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/en/docs/migrating-to-pyrefly/">Migrating to Pyrefly</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/migrating-to-pyrefly/">Migration Guides</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/migrating-from-mypy/">Migrating from Mypy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/migrating-from-pyright/">Migrating from Pyright</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/en/docs/IDE/">Language Server</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/IDE/">IDE Installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/IDE-features/">IDE Supported Features</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/en/docs/pydantic/">Third-Party Extensions</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/en/docs/error-suppressions/">Errors</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/error-suppressions/">Error Suppressions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/error-kinds/">Error Kinds</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/import-resolution/">Import Resolution</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/en/docs/autotype/">Tools</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/autotype/">Automating Type Annotations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/report/">Measuring Type Coverage</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/en/docs/pyrefly-faq/">FAQ</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Getting Started</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Configuration</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown">
<header><h1>Pyrefly Configuration</h1></header>
<p>Pyrefly has a basic configuration that can (or will) allow you to customize your
Pyrefly runs without having to specify all of your arguments on the command
line.</p>
<p>NOTE: this is early in its development, so the options listed here are subject
to change in name, usage, type, quantity, and structure.</p>
<p>Configurations can be specified in a <a href="https://toml.io/en/" target="_blank" rel="noopener noreferrer">TOML file</a> at the root of
your project (or elsewhere, as long as the path-based config options point to the right place) named
<code>pyrefly.toml</code>, with all configuration options in the top-level of the document.
You can also specify a configuration in a <code>pyproject.toml</code> under a <code>[tool.pyrefly]</code>
section. Other config names can be used when explicitly passing in the config file
name with the <code>--config</code>/<code>-c</code> flag, but they will not be automatically found by
<a href="#configuration-finding">Configuration Finding</a>.</p>
<p>Both absolute and config-relative paths are supported.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Want type error squiggles to show up in your editor by default? Try setting <code>python.pyrefly.displayTypeErrors</code> to <code>&quot;force-on&quot;</code> in your editor settings, create a <code>pyrefly.toml</code> file in your project root, or add a <code>[tool.pyrefly]</code> section to your <code>pyproject.toml</code> (can be empty).</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="simple-configuration-example">Simple Configuration Example<a href="#simple-configuration-example" class="hash-link" aria-label="Direct link to Simple Configuration Example" title="Direct link to Simple Configuration Example">​</a></h2>
<p>Here&#x27;s an example of a simple config. To see more complex examples,
including in a <code>pyproject.toml</code>, look at
<a href="#example-configurations">Example Configurations</a>, which show Pyrefly&#x27;s default
config, as well as other ways you can set your configuration.</p>
<div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># set the directory Pyrefly will search for files to type check</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">project-includes</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;a&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;b/c/d&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;e&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># manually set the `sys.platform` Pyrefly will assume when type checking</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">python-platform</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;linux&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># a table mapping error codes to an `is-enabled` boolean</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token table class-name">errors</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># disable `bad-assignment` errors</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">bad-assignment</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># disable `bad-return` errors</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">bad-return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token boolean">false</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="precedence-in-options">Precedence in Options<a href="#precedence-in-options" class="hash-link" aria-label="Direct link to Precedence in Options" title="Direct link to Precedence in Options">​</a></h2>
<p><a href="#configuration-options">Configuration options</a> are selected in the following order</p>
<ol>
<li>CLI flags<!-- -->
<ul>
<li>Examples: <code>--project-excludes &lt;value&gt;</code>, <code>--python-version &lt;value&gt;</code></li>
</ul>
</li>
<li>Configuration options<!-- -->
<ul>
<li>Examples: (in a <code>pyrefly.toml</code>) <code>project-excludes = &lt;value&gt;</code>, <code>python-version = &lt;value&gt;</code></li>
</ul>
</li>
<li>Pyrefly defaults<!-- -->
<ul>
<li>See <a href="#default-pyreflytoml">Default <code>pyrefly.toml</code></a> for the default values used</li>
</ul>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="type-checking-modes">Type Checking Modes<a href="#type-checking-modes" class="hash-link" aria-label="Direct link to Type Checking Modes" title="Direct link to Type Checking Modes">​</a></h2>
<p>Pyrefly has two different modes it can run in when type checking your project, which
correspond to different but useful ways we expect most people to interact with Pyrefly:</p>
<ul>
<li><strong>Project</strong> mode: attempt to load a config, falling back to Pyrefly&#x27;s default config when
none can be found, and type check using that one config. This involves getting the
<a href="#project-includes"><code>project-includes</code></a> and <a href="#project-excludes"><code>project-excludes</code></a> from the file, expanding the patterns,
and type checking on those files.<!-- -->
<ul>
<li>Project mode is used whenever no files are provided with the CLI invocation.</li>
</ul>
</li>
<li><strong>Per-file</strong> or <strong>Single-file</strong> mode: when given <a href="#project-includes"><code>FILES...</code></a> (and optionally <a href="#project-excludes"><code>--project-excludes</code></a>)
during a CLI invocation, expand the patterns and find the relevant config file for each
file listed. <code>project-includes</code> and <code>project-excludes</code> are ignored from the config file,
but it is used for all remaining config options.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-finding">Configuration Finding<a href="#configuration-finding" class="hash-link" aria-label="Direct link to Configuration Finding" title="Direct link to Configuration Finding">​</a></h2>
<p>In both project checking mode and single-file checking mode (see <a href="#type-checking-modes">Type Checking Modes</a>
for more info), we attempt to find a <em>project root</em> from which to check each file, both for reading
config options and for import resolution. The project root is typically the directory containing the
configuration file. More precisely:</p>
<ol>
<li>If a configuration file is provided with <code>-c</code>/<code>--config</code>, we use the directory the file is located in as the directory to check.</li>
<li>If no configuration file is passed, we perform an upward file search from the &#x27;start location&#x27; to the filesystem root,
looking in each directory for any of the following files: <code>pyrefly.toml</code>, <code>pyproject.toml</code>,
<code>setup.py</code>, <code>mypy.ini</code>, and <code>pyrightconfig.json</code>. If we find one, we use the directory it&#x27;s found in as the containing directory.</li>
<li>If no configuration file is found, we will still attempt to resolve imports by walking up the tree looking for a matching import. For example: when
importing <code>from a.b.c import q</code>, if our project structure
looks like <code>/x/y/z/a/b/c</code>, we can walk up the components of <code>a.b.c</code> to find a root at
<code>/x/y/z</code>.</li>
</ol>
<p>Note that only <code>pyrefly.toml</code> and <code>pyproject.toml</code> are parsed for config options, but we look for
additional files that mark the root of a project to aid import resolution.</p>
<p>For project checking mode, the &#x27;start location&#x27; is current working directory. For single-file checking mode,
the start location is the directory containing each file to be type checked, and
we find the config for each file matched by the pattern provided.</p>
<p>If a <code>pyrefly.toml</code> is found, it is parsed and used for type checking, and will
return an error to the user on invalid types, syntax, values, or unknown config options.</p>
<p>If a <code>pyproject.toml</code> is found, Pyrefly will use the <code>[tool.pyrefly]</code>
section if it exists, otherwise it will assume a default config.
The same errors will be returned as when loading a <code>pyrefly.toml</code> if
the config is invalid.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="providing-a-config-in-single-file-mode">Providing a Config in Single-File Mode<a href="#providing-a-config-in-single-file-mode" class="hash-link" aria-label="Direct link to Providing a Config in Single-File Mode" title="Direct link to Providing a Config in Single-File Mode">​</a></h3>
<p>Providing <code>-c</code>/<code>--config</code> in single-file checking mode disables the upward file search for config
files. All options are read from the provided config file except <code>project-includes</code> and
<code>project-excludes</code>, which are ignored.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-options">Configuration Options<a href="#configuration-options" class="hash-link" aria-label="Direct link to Configuration Options" title="Direct link to Configuration Options">​</a></h2>
<p>The following section lists all recognized options that can be specified in a config
file or <code>pyproject.toml</code> Pyrefly config section.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="project-includes"><code>project-includes</code><a href="#project-includes" class="hash-link" aria-label="Direct link to project-includes" title="Direct link to project-includes">​</a></h3>
<p>The glob patterns used to describe which files to type
check, typically understood as user-space files.</p>
<p>This does not specify
<a href="/en/docs/import-resolution/">Import Resolution</a> priority or the path an
import should be resolved from. See <a href="#search-path"><code>search-path</code></a> instead.</p>
<ul>
<li>Type: list of <a href="#filesystem-globbing">filesystem glob patterns</a></li>
<li>Default: <code>[&quot;**/*.py*&quot;]</code></li>
<li>Flag equivalent: <code>FILES...</code> argument</li>
<li>Equivalent configs: <code>include</code> in Pyright, <code>files</code>/<code>modules</code>/<code>packages</code> in
mypy</li>
<li>Notes:<!-- -->
<ul>
<li>When overridden by passing in <code>FILES...</code>, we do not consult the
relevant config file for what to use for <code>project-excludes</code>.
If <code>project-excludes</code> should not use the default value, override it with the flag as
well. This is because
if multiple configs are loaded that conflict with <code>project-includes</code>, determining
how to resolve checkable files gets complicated, and might become confusing to
anyone attempting a type check if they&#x27;re unaware of all the configs that will be
used in the type check. Also, we get into a chicken-and-egg problem, where we
don&#x27;t know which files to exclude until we load all the configs we&#x27;ll need,
which requires loading all files, and imposes a large performance burden.</li>
<li>When a <code>project-includes</code> pattern does not match any files, we will return
an error.</li>
<li>If you get an error about no matches for a directory when passing a glob as a CLI
argument, try wrapping the glob in quotes to prevent eager shell glob expansion.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="project-excludes"><code>project-excludes</code><a href="#project-excludes" class="hash-link" aria-label="Direct link to project-excludes" title="Direct link to project-excludes">​</a></h3>
<p>The glob patterns used to describe which files to avoid
type checking as way to filter files that match <code>project-includes</code>,
but we don&#x27;t want to type check.</p>
<p>The default value is appended to your <code>project-excludes</code> unless <code>disable-project-excludes-heuristics</code>
is set. See <a href="#disable-project-excludes-heuristics"><code>disable-project-excludes-heuristics</code></a> to fully replace
or remove <code>project-excludes</code>.</p>
<ul>
<li>Type: list of <a href="#filesystem-globbing">filesystem glob patterns</a></li>
<li>Default: <code>[&quot;**/node_modules&quot;, &quot;**/__pycache__&quot;, &quot;**/venv/**&quot;, &quot;**/.[!/.]*/**&quot;]</code> +
anything in your <code>site-package-path</code> (even from the interpreter) unless it would
exclude items in your <a href="#search-path"><code>search-path</code></a>.</li>
<li>Flag equivalent: <code>--project-excludes</code></li>
<li>Equivalent configs: <code>exclude</code> in Pyright and mypy</li>
<li>Notes:<!-- -->
<ul>
<li>While not explicitly part of <code>project-excludes</code>, there are several patterns that are
filtered out of type checked files at our glob-implementation layer.<!-- -->
<ul>
<li>Dotfiles (any files that begin with a dot (<code>.&lt;stuff&gt;</code>)</li>
<li>Any files that don&#x27;t end in <code>.py</code> or <code>.pyi</code></li>
<li>Your <a href="#site-package-path"><code>site-package-path</code></a> (including paths queried from
the interpreter)</li>
</ul>
</li>
<li>It is an error if no files are returned from any <code>project-includes</code> because
they are filtered out by <code>project-excludes</code> entries. We differentiate between
an error from a <code>project-includes</code> that doesn&#x27;t match any files, and an error
from all <code>project-includes</code> getting filtered by <code>project-excludes</code>.</li>
<li>When overridden by passing in <code>FILES...</code>, we do not consult the
relevant config file for what to use for <code>project-excludes</code>.
If <code>project-excludes</code> should not use the default value, override it with the flag as
well. See reasoning in <a href="#project-includes"><code>project-includes</code> notes</a>.</li>
<li>Your <a href="#site-package-path"><code>site-package-path</code></a> is added to your <code>project-excludes</code>
automatically. If you are trying to perform type checking on a dependency in your
<code>site-package-path</code> (i.e. <code>cd &lt;site-package-path&gt;/some_dependency &amp;&amp; pyrefly check</code>),
we recommend you pull and set up your dependency from GitHub, but you can achieve
this on files in your <code>site-package-path</code> by setting <code>site-package-path = []</code> in
your config.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="disable-project-excludes-heuristics"><code>disable-project-excludes-heuristics</code><a href="#disable-project-excludes-heuristics" class="hash-link" aria-label="Direct link to disable-project-excludes-heuristics" title="Direct link to disable-project-excludes-heuristics">​</a></h3>
<p>By default, Pyrefly includes several items in your <a href="#project-excludes"><code>project-excludes</code></a>
(see <code>project-excludes</code> for the default values). These items are path patterns we&#x27;ve
determined rarely have files that should be type checked, but can require a very long
time to crawl while enumerating files, or contain third-party code that you likely
don&#x27;t care about errors in. When specifying <code>project-excludes</code>, we always append
these defaults to whatever is specified by CLI or in your configuration.</p>
<p>Sometimes, these preselected settings can interfere with your project&#x27;s setup.
<code>disable-project-excludes-heuristics</code> lets you start from scratch, setting that default to <code>[]</code>,
so you can fully specify your <code>project-excludes</code> in case we get it wrong.</p>
<ul>
<li>Type: <code>bool</code></li>
<li>Default: <code>false</code></li>
<li>Flag equivalent: <code>--disable-project-excludes-heuristics</code></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="search-path"><code>search-path</code><a href="#search-path" class="hash-link" aria-label="Direct link to search-path" title="Direct link to search-path">​</a></h3>
<p>A file path describing the roots from which imports should be
found and imported from (including modules in <a href="#project-includes"><code>project-includes</code></a>). This takes
the <a href="/en/docs/import-resolution/#absolute-imports">highest precedence in import order</a>,
before <code>typeshed</code> and <a href="#site-package-path"><code>site-package-path</code></a>. When a <code>project-includes</code>
type checked file is imported by another type checked file, we check all search roots to
determine how to import it.</p>
<ul>
<li>Type: list of directories specifying the root</li>
<li>Default: import root</li>
<li>Flag equivalent: <code>--search-path</code></li>
<li>Equivalent configs: <code>extraPaths</code> in Pyright, <code>mypy_path</code> in mypy</li>
<li>Notes:<!-- -->
<ul>
<li>We automatically apply some heuristics to improve your experience, especially
when no configuration is provided. See
<a href="#disable-search-path-heuristics"><code>disable-search-path-heuristics</code></a> to disable
this behavior, and <a href="#search-path-heuristics">Search Path Heuristics</a> for the
additional paths we add to your <code>search-path</code>.</li>
<li>Libraries should not be listed here, since they may override <code>typeshed</code>
values for your whole project, and have different import semantics with
respect to typing. See
<a href="/en/docs/import-resolution/">Import Resolution</a>
for more information about how modules are imported.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="disable-search-path-heuristics"><code>disable-search-path-heuristics</code><a href="#disable-search-path-heuristics" class="hash-link" aria-label="Direct link to disable-search-path-heuristics" title="Direct link to disable-search-path-heuristics">​</a></h3>
<p>Disable any search path heuristics/additional search path behavior that Pyrefly will
attempt to do for you. This can be useful if Pyrefly is picking up the wrong import
paths for your project, for example, if you have multiple projects in the same
directory or use a monorepo setup with the import root outside of the directory
your configuration is defined in.</p>
<p>See <a href="#search-path-heuristics">Search Path Heuristics</a> for more information on the
search paths that are automatically added, and are affected by this flag. For more
information on import resultion in general see the
<a href="/en/docs/import-resolution/">import resolution docs</a>.</p>
<ul>
<li>Type: bool</li>
<li>Default: false</li>
<li>Flag equivalent: <code>--disable-search-path-heuristics</code></li>
<li>Equivalent configs: none</li>
<li>Notes<!-- -->
<ul>
<li>To see what search path we find for your a given file in your project, or
your project overall, you can run <code>pyrefly dump-config [&lt;file&gt;...]</code>.</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="search-path-heuristics"><strong>Search Path Heuristics</strong><a href="#search-path-heuristics" class="hash-link" aria-label="Direct link to search-path-heuristics" title="Direct link to search-path-heuristics">​</a></h4>
<p>Pyrefly adds extra search paths to your configuration behind-the-scenes to handle
the most common ways of setting up and configuring your project, on top of any
<a href="#search-path"><code>search-path</code></a> entries you may pass in through the CLI or
set in your config.</p>
<p>The two heuristics that are currently supported are:</p>
<ol>
<li>Adding your import root to the end of your search path. Your import root is
a <code>src/</code> directory in the same directory as a config file, the parent directory
containing your config file if there&#x27;s an <code>__init__.py</code> or <code>__init__.pyi</code> present
<em>or</em> the config file&#x27;s directory itself if none of the previously mentioned directories
or files can be found.
See <a href="#configuration-finding">Configuration Finding</a> for more information on
what we&#x27;ll find as a config file.</li>
<li>If no config can be found, each directory from the given file to <code>/</code> will be
added as a fallback search path.</li>
</ol>
<p>See more on <a href="/en/docs/import-resolution/">how Pyrefly does import resolution</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="site-package-path"><code>site-package-path</code><a href="#site-package-path" class="hash-link" aria-label="Direct link to site-package-path" title="Direct link to site-package-path">​</a></h3>
<p>A file path describing a root from which imports should
be found and imported from. This takes the lowest priority in import
resolution, after <a href="#search-path"><code>search-path</code></a> and <code>typeshed</code>.</p>
<p>See more on <a href="/en/docs/import-resolution/">how Pyrefly does import resolution</a>.</p>
<ul>
<li>Type: list of directories</li>
<li>Default: <code>./typings</code> + the result from <a href="#environment-autoconfiguration">Environment Autoconfiguration</a>, or
<code>[]</code> if the Python interpreter cannot be queried</li>
<li>Flag equivalent: <code>--site-package-path</code></li>
<li>Equivalent configs: none</li>
<li>Notes:<!-- -->
<ul>
<li>The queried interpreter&#x27;s site package paths will always be included in addition to any user-specified value,
unless environment auto-configuration is turned off.</li>
<li>Ideally, this should not be set manually, unless you&#x27;re using a venv, running one-off tests,
testing specific behavior, or having trouble with <a href="#environment-autoconfiguration">Environment Autoconfiguration</a>.
Setting this explicitly, especially when not using a venv, will make it difficult for your configuration
to be reused between different systems and platforms.</li>
<li>If you&#x27;re running into problems with editiable installations in your project,
please read up on <a href="/en/docs/import-resolution/#editable-installs">editable installs with static analysis tools</a>.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="python-platform"><code>python-platform</code><a href="#python-platform" class="hash-link" aria-label="Direct link to python-platform" title="Direct link to python-platform">​</a></h3>
<p>The value used with conditions based on type checking
against
<a href="https://docs.python.org/3/library/sys.html#sys.platform" target="_blank" rel="noopener noreferrer"><code>sys.platform</code></a>
values.</p>
<ul>
<li>Type: string</li>
<li>Default: result from <a href="#environment-autoconfiguration">Environment Autoconfiguration</a>, or
&quot;linux&quot; if the Python interpreter cannot be queried</li>
<li>Flag equivalent: <code>--python-platform</code></li>
<li>Equivalent configs: <code>pythonPlatform</code> in Pyright, <code>platform</code> in mypy</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="python-version"><code>python-version</code><a href="#python-version" class="hash-link" aria-label="Direct link to python-version" title="Direct link to python-version">​</a></h3>
<p>The value used with conditions based on type checking
against
<a href="https://docs.python.org/3/library/sys.html#sys.version" target="_blank" rel="noopener noreferrer"><code>sys.version</code></a>
values. The format should be <code>&lt;major&gt;[.&lt;minor&gt;[.&lt;micro&gt;]]</code>, where minor and
micro can be omitted to take the default positional value.</p>
<ul>
<li>Type: string of the format <code>&lt;major&gt;[.&lt;minor&gt;[.&lt;micro&gt;]]</code></li>
<li>Default: result from <a href="#environment-autoconfiguration">Environment Autoconfiguration</a>, or
<code>3.13.0</code> if the Python interpreter cannot be queried</li>
<li>Flag equivalent: <code>--python-version</code></li>
<li>Equivalent configs: <code>pythonVersion</code> in Pyright, <code>python_version</code> in mypy</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="conda-environment"><code>conda-environment</code><a href="#conda-environment" class="hash-link" aria-label="Direct link to conda-environment" title="Direct link to conda-environment">​</a></h3>
<p>The name of the Conda environment to query when attempting to autoconfigure
Python environment values (<code>site-package-path</code>, <code>python-platform</code>, <code>python-version</code>).
See the <a href="#environment-autoconfiguration">Environment Autoconfiguration section</a> for more
information. We query Conda with <code>conda info --envs</code>, then find the environment&#x27;s interpreter in Environment Autoconfirugration.</p>
<p>We will query Conda for information about this environment, even when it&#x27;s not sourced,
unless a Python environment (venv, Conda) is activated or <code>--python-interpreter-path</code> or
<code>--conda-environment</code> are passed in through the CLI.</p>
<p><strong><code>conda-environment</code>, <code>fallback-python-interpreter-name</code>, <code>conda-environment</code>,
and <code>skip-interpreter-query</code> are mutually exclusive with each other.</strong></p>
<ul>
<li>Type: string of existing Conda environment name</li>
<li>Default: none</li>
<li>Flag equivalent: <code>--conda-environment</code></li>
<li>Equivalent configs: none</li>
<li>Notes:<!-- -->
<ul>
<li>This enables the use of a non-local but customizable global environment without having to hard-code a path, which is not preferable on a shared project.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="python-interpreter-path"><code>python-interpreter-path</code><a href="#python-interpreter-path" class="hash-link" aria-label="Direct link to python-interpreter-path" title="Direct link to python-interpreter-path">​</a></h3>
<p>The Python interpreter to query when attempting to autoconfigure
Python environment values (<code>site-package-path</code>, <code>python-platform</code>, <code>python-version</code>).
See the <a href="#environment-autoconfiguration">Environment Autoconfiguration section</a> for more information.</p>
<p><strong><code>conda-environment</code>, <code>fallback-python-interpreter-name</code>, <code>conda-environment</code>,
and <code>skip-interpreter-query</code> are mutually exclusive with each other.</strong></p>
<ul>
<li>Type: path to executable</li>
<li>Default: <code>$(which python3)</code>, then <code>$(which python)</code>, or none</li>
<li>Flag equivalent: <code>--python-interpreter-path</code></li>
<li>Equivalent configs: <code>python_executable</code> in mypy</li>
<li>Notes:<!-- -->
<ul>
<li>This executes the value present in the <code>python-interpreter-path</code> field without any checks. It could
be a security risk if your <code>python-interpreter-path</code> is an arbitrary executable.</li>
<li>If you don&#x27;t have a Python interpreter installed on your machine, we&#x27;ll output an
error letting you that we couldn&#x27;t appropriately configure your environment.
Configure <code>skip-interpreter-query</code> to skip the check and avoid the error.</li>
</ul>
</li>
</ul>
<p>NOTE: Ideally, this should not be set manually, unless you&#x27;re using a venv, running one-off tests,
testing specific behavior, or having trouble with <a href="#environment-autoconfiguration">Environment Autoconfiguration</a>.
Setting this explicitly, especially when not using a venv, will make it difficult for your configuration
to be reused between different systems and platforms.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="fallback-python-interpreter-name"><code>fallback-python-interpreter-name</code><a href="#fallback-python-interpreter-name" class="hash-link" aria-label="Direct link to fallback-python-interpreter-name" title="Direct link to fallback-python-interpreter-name">​</a></h3>
<p>The Python interpreter, available on your <code>$PATH</code>, to use. Pyrefly will perform
<code>which &lt;your command&gt;</code>, and automatically fill in <code>python-interpreter-path</code> for you with
the found path. Pyrefly will automatically search for <code>python3</code> and <code>python</code> on your
path when this option and <a href="#python-interpreter-path"><code>python-interpreter-path</code></a> are unset if
<a href="#skip-interpreter-query"><code>skip-interpreter-query = false</code></a>,
so this should primarily be used when you have a non-standard Python executable you want to
use.</p>
<p><strong><code>conda-environment</code>, <code>fallback-python-interpreter-name</code>, <code>conda-environment</code>,
and <code>skip-interpreter-query</code> are mutually exclusive with each other.</strong></p>
<ul>
<li>Type: string of command to use</li>
<li>Default: <code>python3</code>, then <code>python</code>, or none</li>
<li>Flag equivalent: <code>--fallback-python-interpreter-name</code></li>
<li>Notes:<!-- -->
<ul>
<li>This executes the value present in the <code>fallback-python-interpreter-name</code> field without
any checks. It could be a security risk if your <code>fallback-python-interpreter-name</code> is an
arbitrary executable.</li>
<li>If you don&#x27;t have a Python interpreter installed on your machine, we&#x27;ll output an
error letting you that we couldn&#x27;t appropriately configure your environment.
Configure <code>skip-interpreter-query</code> to skip the check and avoid the error.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="skip-interpreter-query"><code>skip-interpreter-query</code><a href="#skip-interpreter-query" class="hash-link" aria-label="Direct link to skip-interpreter-query" title="Direct link to skip-interpreter-query">​</a></h3>
<p>Skip querying any interpreters and do not do any
<a href="#environment-autoconfiguration">Environment Autoconfiguration</a>. This means that
Pyrefly will take hard-coded defaults for <a href="#python-version%60"><code>python-version</code></a>
and <a href="#python-platform"><code>python-platform</code></a>, and will use an empty
<a href="#site-package-path"><code>site-package-path</code></a>. It&#x27;s likely you&#x27;ll want to override
these to match the environment you&#x27;ll be running in.</p>
<p><strong><code>conda-environment</code>, <code>fallback-python-interpreter-name</code>, <code>conda-environment</code>,
and <code>skip-interpreter-query</code> are mutually exclusive with each other.</strong></p>
<ul>
<li>Type: bool</li>
<li>Default: <code>false</code></li>
<li>Flag equivalent: <code>--skip-interpreter-query</code></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="typeshed-path"><code>typeshed-path</code><a href="#typeshed-path" class="hash-link" aria-label="Direct link to typeshed-path" title="Direct link to typeshed-path">​</a></h3>
<p>Override the version of typeshed that&#x27;s being used for type checking. The provided
path should point to the root of typeshed.</p>
<p><a href="https://github.com/python/typeshed" target="_blank" rel="noopener noreferrer">Typeshed</a> contains the type information for Python&#x27;s
standard library, which Pyrefly uses for type checking and resolving both the most basic
types (like <code>object</code>, <code>str</code>, ...) and types/type signatures from stdlib modules.</p>
<ul>
<li>Type: path to typeshed</li>
<li>Default: none (resolves to bundled typeshed)</li>
<li>Flag equivalent: <code>--typeshed-path</code></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="baseline"><code>baseline</code><a href="#baseline" class="hash-link" aria-label="Direct link to baseline" title="Direct link to baseline">​</a></h3>
<p>Path to a baseline JSON file for comparing type errors. Errors matching the baseline
are suppressed, so only newly-introduced errors are reported. This is useful when
introducing type checking to a project for the first time, or when rolling out
changes that would otherwise produce many new errors at once.</p>
<p>To generate (or re-generate) the baseline file, run:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">pyrefly check --baseline=&quot;&lt;path to baseline file&gt;&quot; --update-baseline</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>See the <a href="/en/docs/error-suppressions/#baseline-files-experimental">Error Suppressions docs</a> for
more details on how baseline files work.</p>
<ul>
<li>Type: path to a JSON file</li>
<li>Default: none (no baseline)</li>
<li>Flag equivalent: <code>--baseline</code></li>
<li>Notes:<!-- -->
<ul>
<li><code>baseline</code> is a <strong>project-level setting</strong> and cannot be overridden in
<a href="#sub-configs"><code>sub-config</code></a> sections.</li>
<li>Errors suppressed by the baseline file are still shown in the IDE.</li>
<li>Errors are matched with the baseline by file, error code, and column number.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="errors"><code>errors</code><a href="#errors" class="hash-link" aria-label="Direct link to errors" title="Direct link to errors">​</a></h3>
<p>Configure the severity for each kind of error that Pyrefly emits: <code>error</code>, <code>warn</code>, <code>ignore</code>.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Want type error squiggles to show up in your editor by default? Try setting <code>python.pyrefly.displayTypeErrors</code> to <code>&quot;force-on&quot;</code> in your editor settings, create a <code>pyrefly.toml</code> file in your project root, or add a <code>[tool.pyrefly]</code> section to your <code>pyproject.toml</code> (can be empty).</p></div></div>
<ul>
<li>Type: Table of <a href="/en/docs/error-kinds/">error code</a> to boolean representing enabled status</li>
<li>Default: <code>errors = {}</code>/<code>[errors]</code></li>
<li>Flag equivalent: <code>--error</code>, <code>--warn</code>, <code>--ignore</code></li>
<li>Equivalent configs:
<a href="https://microsoft.github.io/pyright/#/configuration?id=type-check-rule-overrides" target="_blank" rel="noopener noreferrer">type check rule overrides</a>
and <a href="https://microsoft.github.io/pyright/#/configuration?id=type-evaluation-settings" target="_blank" rel="noopener noreferrer">type evaluation settings</a>
in Pyright,
<a href="https://mypy.readthedocs.io/en/stable/config_file.html#confval-enable_error_code" target="_blank" rel="noopener noreferrer"><code>enable_error_code</code></a> and
<a href="https://mypy.readthedocs.io/en/stable/config_file.html#confval-disable_error_code" target="_blank" rel="noopener noreferrer"><code>disable_error_code</code></a>
in mypy</li>
<li>Notes:<!-- -->
<ul>
<li>Setting <code>&lt;error-code&gt; = true</code> means the error will be shown at default
severity (or severity <code>ERROR</code> if the error is off by default). Setting
<code>&lt;error-code&gt; = false</code> will disable the error for type checking.</li>
<li>If you want to disable type errors in IDE mode, you can also set
<a href="#disable-type-errors-in-ide"><code>disable-type-errors-in-ide</code></a>, which will
automatically disable <em>all</em> type errors and Pyrefly diagnostics in the IDE.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="disable-type-errors-in-ide"><code>disable-type-errors-in-ide</code><a href="#disable-type-errors-in-ide" class="hash-link" aria-label="Direct link to disable-type-errors-in-ide" title="Direct link to disable-type-errors-in-ide">​</a></h3>
<p>Disables type errors from showing up when running Pyrefly in an IDE. This is primarily
used when Pyrefly is acting in a language-server-only mode, but some kind of
manual configuration is necessary for it to work properly, or when you would
<em>only</em> want to see type errors on CLI/CI runs.</p>
<ul>
<li>Type: <code>bool</code></li>
<li>Default: <code>false</code></li>
<li>Flag equivalent: none</li>
<li>Notes: if you want to disable errors on CLI/CI runs as well, or if you&#x27;re looking
to turn on/off specific errors, you may be looking for the <a href="#errors"><code>errors</code></a> config
option instead.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="skip-lsp-config-indexing"><code>skip-lsp-config-indexing</code><a href="#skip-lsp-config-indexing" class="hash-link" aria-label="Direct link to skip-lsp-config-indexing" title="Direct link to skip-lsp-config-indexing"> ​</a></h3>
<p>Disables automatic project indexing when running Pyrefly as a language server.
Enabling this may speed up LSP startup and reduce resource usage on large projects,
at the cost of some language server features that rely on a full project index.</p>
<ul>
<li>Type: <code>bool</code></li>
<li>Default: <code>false</code></li>
<li>Flag equivalent: none</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="replace-imports-with-any"><code>replace-imports-with-any</code><a href="#replace-imports-with-any" class="hash-link" aria-label="Direct link to replace-imports-with-any" title="Direct link to replace-imports-with-any">​</a></h3>
<p>Instruct Pyrefly to unconditionally replace the given <a href="#module-globbing"><code>ModuleGlob</code></a>s
with <code>typing.Any</code> and ignore import errors for the module. For example,
with <code>from x.y import z</code> in a file, adding <code>x.*</code>, <code>*.y</code>, or <code>x.y</code> to this config will
silence those import errors and replace the module with <code>typing.Any</code>. If the module
can be found, its type information will still be replaced with <code>typing.Any</code>.</p>
<p>This is different from <a href="#ignore-missing-imports"><code>ignore-missing-imports</code></a>, which only
replaces the import with <code>typing.Any</code> if it can&#x27;t be found.</p>
<ul>
<li>Type: list of regex</li>
<li>Default: <code>[]</code></li>
<li>Flag equivalent: <code>--replace-imports-with-any</code></li>
<li>Equivalent configs: <code>follow_imports = skip</code> in mypy</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ignore-missing-imports"><code>ignore-missing-imports</code><a href="#ignore-missing-imports" class="hash-link" aria-label="Direct link to ignore-missing-imports" title="Direct link to ignore-missing-imports">​</a></h3>
<p>Instruct Pyrefly to replace the given <a href="#module-globbing"><code>ModuleGlob</code></a>s
with <code>typing.Any</code> and ignore import errors for the module <em>only when the module
can&#x27;t be found</em>.</p>
<p>For example, with <code>from x.y import z</code> in a file, adding <code>x.*</code>, <code>*.y</code>, or <code>x.y</code> to
this config will silence those import errors and replace the module with <code>typing.Any</code>
if <code>x.y</code> can&#x27;t be found. If <code>x.y</code> can be found, then <code>z</code>&#x27;s type will be used.</p>
<p>This is different from <a href="#replace-imports-with-any"><code>replace-imports-with-any</code></a>, which
will always, unconditionally replace the import with <code>typing.Any</code>.</p>
<ul>
<li>Type: list of regex</li>
<li>Default: <code>[]</code></li>
<li>Flag equivalent: <code>--ignore-missing-imports</code></li>
<li>Equivalent configs: <code>ignore_missing_imports</code> in mypy</li>
<li>Notes:<!-- -->
<ul>
<li><code>errors = {missing-import = false}</code> (TOML inline table for <code>errors</code>) has similar behavior in Pyrefly, but ignores
<em>all</em> import errors instead of import errors from specific modules.</li>
<li>When a <code>.pyc</code> file is encountered and no source/stub files are available, Pyrefly automatically treats module as <code>typing.Any</code>.
This behavior ensures that compiled Python files without available source code do not cause import errors and are handled permissively.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ignore-errors-in-generated-code"><code>ignore-errors-in-generated-code</code><a href="#ignore-errors-in-generated-code" class="hash-link" aria-label="Direct link to ignore-errors-in-generated-code" title="Direct link to ignore-errors-in-generated-code">​</a></h3>
<p>Whether to ignore type errors in generated code. If enabled, generated files
will be treated as if they are included in <code>project-excludes</code>.
The generated code status is determined by checking if the file contents contain
the substring &#x27;<span>@</span>generated&#x27;.</p>
<ul>
<li>Type: bool</li>
<li>Default: <code>false</code></li>
<li>Flag equivalent: <code>--ignore-errors-in-generated-code</code></li>
<li>Equivalent configs: none</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="infer-with-first-use"><code>infer-with-first-use</code><a href="#infer-with-first-use" class="hash-link" aria-label="Direct link to infer-with-first-use" title="Direct link to infer-with-first-use">​</a></h3>
<p>Whether to infer type variables not determined by a call or constructor based on their first usage.
This includes empty containers like <code>[]</code> and <code>{}</code>.</p>
<p>The default behavior is similar to Mypy - the type of the variable is inferred based on the first usage.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">x </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">x</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">append</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># x is list[int]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">x</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">append</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;2&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># error!</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Setting this to false will make Pyrefly infer <code>Any</code> for unsolved type variables, which behaves like Pyright.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">x </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># x is list[Any]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">x</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">append</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># ok</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">x</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">append</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;2&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># ok</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>Type: bool</li>
<li>Default: <code>true</code></li>
<li>Flag equivalent: <code>--infer-with-first-use</code></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="untyped-def-behavior"><code>untyped-def-behavior</code><a href="#untyped-def-behavior" class="hash-link" aria-label="Direct link to untyped-def-behavior" title="Direct link to untyped-def-behavior">​</a></h3>
<p>How should Pyrefly treat function definitions with no parameter or return type annotations?</p>
<p>By default, Pyrefly uses the <code>&quot;check-and-infer-return-type&quot;</code> behavior and will
check all function bodies, inferring the return type.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>To provide inferred return types with <code>check-and-infer-return-type</code>, especially for
site-package paths (third-party packages), Pyrefly may need to load and analyze
more modules than you might otherwise see from mypy.</p><p>This may result in increased type check durations or an output showing more modules
analyzed than you expect. If this behavior is not preferred, you should set
<code>untyped-def-behavior</code> to <code>skip-and-infer-return-any</code> in your config or pass it in
as a flag.</p></div></div>
<p>If this option is set to <code>&quot;check-and-infer-return-any&quot;</code>, then Pyrefly will still
check the function body but will treat the return type as <code>Any</code>.</p>
<p>If this option is set to <code>&quot;skip-and-infer-return-any&quot;</code>, Pyrefly will again treat
the return type as <code>Any</code>, but will also skip checking the function body. In this
case, Pyrefly will also infer <code>Any</code> as the type of any attributes inferred based
on this function body. This behavior is what PEP 484 specifies, although we do
not recommend it for most users today; since Pyrefly will not analyze the bodies
of untyped functions, language server functionality like showing types on hover
and finding definitions will not be available there.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p><code>skip-and-infer-return-any</code> is mypy&#x27;s default inference behavior, and how we will
attempt to migrate your existing mypy configuration when running <code>pyrefly init</code>.
See <a href="/en/docs/migrating-from-mypy/#mypy-config-migration">Migrating from Mypy</a> for more information on config migration.</p></div></div>
<ul>
<li>Type: one of <code>&quot;check-and-infer-return-type&quot;</code>, <code>&quot;check-and-infer-return-any&quot;</code>,
<code>&quot;skip-and-infer-return-any&quot;</code></li>
<li>Default: <code>&quot;check-and-infer-return-type&quot;</code></li>
<li>Flag equivalent: <code>--untyped-def-behavior</code></li>
<li>Equivalent configs:<!-- -->
<ul>
<li>The <code>&quot;check-and-infer-return-type&quot;</code> behavior emulates Pyright&#x27;s default
behavior.</li>
<li>The <code>&quot;skip-and-infer-return-any&quot;</code> behavior emulates mypy&#x27;s default behavior.</li>
<li>The <code>&quot;check-and-infer-return-any&quot;</code> behavior emulates mypy&#x27;s
<code>check_untyped_defs</code> flag.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-ignore-files"><code>use-ignore-files</code><a href="#use-ignore-files" class="hash-link" aria-label="Direct link to use-ignore-files" title="Direct link to use-ignore-files">​</a></h3>
<p>Whether to allow Pyrefly to use ignore files in your project and automatically
add excluded files and directories to your <a href="#project-excludes"><code>project-excludes</code></a>.
Similar to <code>project-excludes</code>, when explicitly specifying files to check, ignore files
are not used.</p>
<p>Pyrefly automatically searches for ignore files such as <code>.gitignore</code>, <code>.ignore</code>,
and <code>.git/info/excludes</code> in an upward search from your project root. Only the first of each
type of ignore file will be used, so if you have a <code>.gitignore</code> and <code>.git/info/excludes</code>
available, in different directories, Pyrefly will use both of them. Pyrefly will not
use global ignore files.</p>
<p>When multiple ignore files are found, Pyrefly checks them for excludes matches when
determining the files to type check in the order of <code>.gitignore</code>, <code>.ignore</code>, and
<code>.git/info/excludes</code>, taking the result of the first ignore file that has a match (either
allowlist or denylist). Regular
<a href="https://git-scm.com/docs/gitignore" target="_blank" rel="noopener noreferrer"><code>.gitignore</code>-style allowlist/denylist matching rules</a> apply.</p>
<ul>
<li>Type: <code>bool</code></li>
<li>Default: <code>true</code></li>
<li>Flag equivalent: <code>--use-ignore-files</code></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="build-system"><code>build-system</code><a href="#build-system" class="hash-link" aria-label="Direct link to build-system" title="Direct link to build-system">​</a></h3>
<p>Pyrefly supports integrating into build systems to discover targets to type
check and their dependencies. It currently natively supports
<a href="https://buck2.build" target="_blank" rel="noopener noreferrer">Buck2</a>, as well as arbitrary build systems via custom
queries.</p>
<p><strong>Note that support for build systems is currently unstable, and breakage may
occur without notice. Support will likely be lower priority than other issues
for a while.</strong></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="buck2">Buck2<a href="#buck2" class="hash-link" aria-label="Direct link to Buck2" title="Direct link to Buck2">​</a></h4>
<p>To configure Pyrefly to use Buck2 as a build system, add the following to your
<code>pyrefly.toml</code>:</p>
<div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token table class-name">build-system</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">type</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;buck&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Optional: The isolation dir for Buck2 to use.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">isolation-dir</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;pyrefly&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Optional: Extra flags passed to Buck2.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">extras</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;--verbose&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;4&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Behind the scenes, Pyrefly will run the
<code>prelude//python/sourcedb/pyrefly.bxl:main</code> <a href="https://buck2.build/docs/bxl/" target="_blank" rel="noopener noreferrer">BXL
script</a> to get the necessary information about
the targets to type check.</p>
<p>Here is a description of the supported optional options:</p>
<p><strong><code>isolation-dir</code></strong></p>
<p>Name of the isolation dir to use when running the BXL query (see <code>buck2 --help</code>
or <a href="https://buck2.build/docs/concepts/isolation_dir/" target="_blank" rel="noopener noreferrer">Buck&#x27;s documentation</a> for
more information about isolation dirs).</p>
<p>Type: string
Default: none (Buck&#x27;s own default is <code>v2</code>)</p>
<p><strong><code>extras</code></strong></p>
<p>Extra command line arguments passed to <code>buck2</code> when running the query.</p>
<ul>
<li>Type: list of strings</li>
<li>Default: <code>[]</code></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="custom-queries">Custom queries<a href="#custom-queries" class="hash-link" aria-label="Direct link to Custom queries" title="Direct link to Custom queries">​</a></h4>
<p>Arbitrary build systems can be integrated using the <code>custom</code> type:</p>
<div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token table class-name">build-system</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">type</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;custom&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">command</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;some&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;command&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;...&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Here is a description of the supported options:.</p>
<p><strong><code>command</code></strong></p>
<p>The command executed to query the build system about available targets.</p>
<p>Pyrefly will call this in the form <code>&lt;command...&gt; @&lt;argfile&gt;</code>, where <code>&lt;argfile&gt;</code>
has the format:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">--</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;arg-flag&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;arg&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>&lt;arg-flag&gt;</code> is either <code>--file</code> or <code>--target</code>, depending on the type of
<code>&lt;arg&gt;</code>, and <code>&lt;arg&gt;</code> is an absolute path to a file or a build system&#x27;s target.</p>
<p>The command should output a JSON file with the following structure:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">&quot;root&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;/path/to/this/repository&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">&quot;db&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token property">&quot;//colorama:py-stubs&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token property">&quot;srcs&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token property">&quot;colorama&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;colorama/__init__.pyi&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token property">&quot;deps&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token property">&quot;buildfile_path&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;colorama/BUCK&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token property">&quot;python_version&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;3.12&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token property">&quot;python_platform&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;linux&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token property">&quot;//colorama:py&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token property">&quot;srcs&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token property">&quot;colorama&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;colorama/__init__.py&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token property">&quot;deps&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;//colorama:py-stubs&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token property">&quot;buildfile_path&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;colorama/BUCK&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token property">&quot;python_version&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;3.12&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token property">&quot;python_platform&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;linux&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token property">&quot;//colorama:colorama&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token property">&quot;alias&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;//colorama:py&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Where:</p>
<ul>
<li><code>root</code> is the absolute path the root of the repository.</li>
<li><code>db</code> is a map from target names to either:<!-- -->
<ul>
<li>library target definitions (e.g. <code>//colorama:py</code> and <code>//colorama:py-stubs</code> here)</li>
<li>target aliases (e.g. <code>//colorama:colorama</code> here)</li>
</ul>
</li>
</ul>
<p>For reference, the command invoked as part of the Buck2 integration is:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">buck2 [--isolation-dir &lt;isolation_dir&gt;] bxl --reuse-current-config [&lt;extras&gt;...] prelude//python/sourcedb/pyrefly.bxl:main @&lt;argfile&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>Type: list of strings</li>
<li>Default: none (the option is required)</li>
</ul>
<p><strong><code>repo_root</code></strong></p>
<p>Path to the root of the repository.</p>
<ul>
<li>Type: path</li>
<li>Default: none</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="permissive-ignores"><code>permissive-ignores</code><a href="#permissive-ignores" class="hash-link" aria-label="Direct link to permissive-ignores" title="Direct link to permissive-ignores">​</a></h3>
<p>Should Pyrefly ignore errors based on annotations from other tools, e.g. <code># pyre-ignore</code> or <code># mypy: ignore</code>?
By default, respects <code># pyrefly: ignore</code> and <code># type: ignore</code>.
Enabling this option is equivalent to passing the names of all tools to <code>enabled-ignores</code>.</p>
<ul>
<li>Type: <code>bool</code></li>
<li>Default: <code>false</code></li>
<li>Flag equivalent: <code>--permissive-ignores</code></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="enabled-ignores"><code>enabled-ignores</code><a href="#enabled-ignores" class="hash-link" aria-label="Direct link to enabled-ignores" title="Direct link to enabled-ignores">​</a></h3>
<p>What set of tools should Pyrefly respect ignore directives from?
Passing the names of all tools is equivalent to enabling <code>permissive-ignores</code>.</p>
<ul>
<li>Type: list of tools</li>
<li>Default: <code>[&quot;type&quot;, &quot;pyrefly&quot;]</code></li>
<li>Flag equivalent: <code>--enabled-ignores</code></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sub-config"><code>sub-config</code><a href="#sub-config" class="hash-link" aria-label="Direct link to sub-config" title="Direct link to sub-config">​</a></h3>
<p>Override specific config values for matched paths in your project. See
<a href="#sub-configs">SubConfigs</a> for more information on the structure
and values that can be overridden here.</p>
<ul>
<li>Type: <a href="https://toml.io/en/v1.0.0#array-of-tables" target="_blank" rel="noopener noreferrer">TOML array of tables</a> with a <a href="#subconfigs">SubConfig structure</a></li>
<li>Default: <code>[]</code></li>
<li>Flag equivalent: none</li>
<li>Equivalent configs: <code>executionEnvironments</code> in Pyright, per-module config options in mypy</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="recursion-depth-limit"><code>recursion-depth-limit</code><a href="#recursion-depth-limit" class="hash-link" aria-label="Direct link to recursion-depth-limit" title="Direct link to recursion-depth-limit">​</a></h3>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>This is a debugging option for investigating stack overflow issues. You should only use
this if Pyrefly is crashing with a stack overflow. If you encounter such a crash, please
<a href="https://github.com/facebook/pyrefly/issues" target="_blank" rel="noopener noreferrer">open an issue</a>.</p></div></div>
<p>Maximum recursion depth before triggering overflow protection. When set to a non-zero value,
Pyrefly will detect when type checking recursion exceeds this limit and handle it according
to <a href="#recursion-overflow-handler"><code>recursion-overflow-handler</code></a>.</p>
<ul>
<li>Type: integer</li>
<li>Default: <code>0</code> (disabled)</li>
<li>Flag equivalent: <code>--recursion-depth-limit</code></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="recursion-overflow-handler"><code>recursion-overflow-handler</code><a href="#recursion-overflow-handler" class="hash-link" aria-label="Direct link to recursion-overflow-handler" title="Direct link to recursion-overflow-handler">​</a></h3>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>This is a debugging option. See <a href="#recursion-depth-limit"><code>recursion-depth-limit</code></a> above.</p></div></div>
<p>How to handle when the recursion depth limit is exceeded:</p>
<ul>
<li>
<p><code>&quot;break-with-placeholder&quot;</code>: Return a placeholder type and emit an internal error. Safe for IDE use.</p>
</li>
<li>
<p><code>&quot;panic-with-debug-info&quot;</code>: Dump debug information to stderr and panic. For debugging stack overflow issues.</p>
</li>
<li>
<p>Type: one of <code>&quot;break-with-placeholder&quot;</code>, <code>&quot;panic-with-debug-info&quot;</code></p>
</li>
<li>
<p>Default: <code>&quot;break-with-placeholder&quot;</code></p>
</li>
<li>
<p>Flag equivalent: <code>--recursion-overflow-handler</code></p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-details">Configuration Details<a href="#configuration-details" class="hash-link" aria-label="Direct link to Configuration Details" title="Direct link to Configuration Details">​</a></h2>
<p>This section describes some of the configuration options, behaviors, or types in more depth, when
there are details shared between multiple config options or the information is more than what
can fit under a single config option description.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="environment-autoconfiguration">Environment Autoconfiguration<a href="#environment-autoconfiguration" class="hash-link" aria-label="Direct link to Environment Autoconfiguration" title="Direct link to Environment Autoconfiguration">​</a></h3>
<p>Unless <code>skip-interpreter-query</code> is set, we&#x27;ll attempt to query a Python interpreter to
determine your <a href="#python-platform"><code>python-platform</code></a> or
<a href="#python-version"><code>python-version</code></a> if they&#x27;re unset. We also get a
<a href="#site-package-path"><code>site-package-path</code></a> from your interpreter to determine which
packages you have installed and append those to the end of any <code>site-package-path</code>
you&#x27;ve configured yourself, either through CLI flags or a config file.</p>
<p>We look for an interpreter with the following logic:</p>
<ol>
<li>Use <a href="#python-interpreter-path"><code>python-interpreter-path</code></a>,
<a href="#conda-environment"><code>fallback-python-interpreter-name](#fallback-python-interpreter-name), or [</code>conda-environment`</a> if any are set by a flag.
More than one cannot be set in flags at the same time.</li>
<li>Determine if there&#x27;s an active <code>venv</code> or <code>conda</code> environment. If both are active at
the same time, we take <code>venv</code> over <code>conda</code>.</li>
<li>Use <a href="#python-interpreter-path"><code>python-interpreter-path</code></a>,
<a href="#conda-environment"><code>fallback-python-interpreter-name](#fallback-python-interpreter-name), or [</code>conda-environment`</a> if either are set in a config file.
Both cannot be set in a config at the same time.</li>
<li>Find a <code>venv</code> at the root of the project by searching for something that looks like a
Python interpreter (matches <code>python(\d(\.\d+)?)?(.exe)?</code> regex), and looking
for a <code>pyvenv.cfg</code> file in known locations. If we can&#x27;t determine the root of your
project with a config file or other well-known root marker file (e.g. <code>setup.py</code>,
<code>pyrightconfig.json</code>, <code>mypy.ini</code>), this step is skipped.</li>
<li>Query <code>$(which python3)</code> and <code>$(which python)</code> (platform independent) to use
a system-installed interpreter.</li>
<li>Fall back to Pyrefly&#x27;s default values for any unspecified config options.</li>
</ol>
<p>The config options we query the interpreter for are:</p>
<ul>
<li><code>python-platform</code>: <code>sys.platform</code></li>
<li><code>python-version</code>: <code>sys.version_info[:3]</code></li>
<li><code>site-package-path</code>: <code>site.getsitepackages() + [site.getusersitepackages()]</code></li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>You can run <code>pyrefly dump-config</code> and pass in your file or configuration like you would
with <code>pyrefly check</code> to see what Pyrefly finds for your Python interpreter and
<code>site-package-path</code>, along with other useful config-debugging features.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="filesystem-globbing">Filesystem Globbing<a href="#filesystem-globbing" class="hash-link" aria-label="Direct link to Filesystem Globbing" title="Direct link to Filesystem Globbing">​</a></h3>
<p>We use a standard Unix-style glob, which allows for wildcard matching when specifying a fileset. It is similar
to regex, but more restricted given the subset of allowed syntax for paths on a filesystem. We currently only
allow matching files with a <code>.py</code>, <code>.pyi</code>, or <code>.pyw</code> suffix.</p>
<p>The globs provided are relative to the config, if one is found, or the current working directory otherwise.
Absolute path globs can also be provided, though this is generally not recommended, since it may not
be compatible with other systems type checking your project.</p>
<ul>
<li>We recognize the following wildcards:<!-- -->
<ul>
<li><code>*</code> matches zero or more characters in a single directory component</li>
<li><code>**</code> matches the current and any sub directories/files in those sub directories</li>
<li><code>?</code> matches any one character</li>
<li><code>[&lt;pattern&gt;]</code> matches any character or character range between the brackets (character range separated by <code>-</code>)</li>
<li><code>[!&lt;pattern&gt;]</code> excludes any character or character range between the brackets and after the <code>!</code></li>
<li>Note: <code>[]</code> can be used to match <code>?</code>, <code>*</code>, <code>[</code>, <code>]</code> literally (e.g. <code>[?]</code>), although these are invalid as part of a Python path.</li>
</ul>
</li>
</ul>
<p>We also support non-wildcard paths, so a relative (or absolute) path like <code>src/</code> will match all Python files under <code>src/</code>
or <code>src/my_file.py</code> will match <code>src/my_file.py</code> exactly.</p>
<p>Any directories matched will also have their <code>.py</code> and <code>.pyi</code> files recursively matched. <code>src/*</code> will match all files and
directories under <code>src/</code>, so therefore, we will recursively match everything under <code>src/</code>.</p>
<p>Examples:</p>
<ul>
<li><code>src/**/*.py</code>: only match <code>.py</code> files under <code>src/</code></li>
<li><code>src</code>, <code>src/</code>, <code>src/*</code>, <code>src/**</code>, and <code>src/**/*</code>: match all <code>.py</code> and <code>.pyi</code> files under `src/</li>
<li><code>?.py</code> and <code>[A-z].py</code>: match any file that looks like <code>&lt;letter&gt;.py</code></li>
<li><code>src/path/to/my/file.py</code>: only match <code>src/path/to/my/file.py</code></li>
<li><code>src/**/tests</code>, <code>src/**/tests/</code>, <code>src/**/tests/**</code>, and <code>src/**/tests/**/*</code>: match all <code>.py</code> and <code>.pyi</code> files in <code>src/</code>
under a directory named <code>tests</code></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="module-globbing">Module Globbing<a href="#module-globbing" class="hash-link" aria-label="Direct link to Module Globbing" title="Direct link to Module Globbing">​</a></h3>
<p>In some config options, we&#x27;ve added globbing for module paths. This is different from both path globs and regex,
in the sense that we&#x27;re performing a match on a Python dotted import, such as <code>this.is.any.module</code>.
The only wildcard we recognize is <code>*</code>, which represents zero or more segments of a module path, unless it starts a glob,
in which case it must match one or more segments. The wildcard must be surrounded
by <code>.</code>, unless it is at the start or end of a module glob.</p>
<p>Examples:</p>
<ul>
<li><code>this.is.a.module</code> would be equivalent to a regex like <code>^this\.is\.a\.module</code>. It will only match imports that look like
<code>this.is.a.module</code>.</li>
<li><code>this.is.*.module</code> would become <code>^this\.is(\..+)*\.module$</code>. It would match:<!-- -->
<ul>
<li><code>this.is.module</code></li>
<li><code>this.is.a.module</code></li>
<li><code>this.is.a.really.long.path.to.a.module</code></li>
</ul>
</li>
<li><code>*.my.module</code> would be equivalent to a regex like <code>^.+\.my\.module$</code>.<!-- -->
<ul>
<li>It would match:<!-- -->
<ul>
<li><code>this.is.my.module</code></li>
<li><code>heres.my.module</code></li>
</ul>
</li>
<li>It will not match:<!-- -->
<ul>
<li><code>my.module</code></li>
</ul>
</li>
</ul>
</li>
<li><code>this.is.*</code> would be equivalent to a regex like <code>^this\.is(\..+)*</code>. It would match:<!-- -->
<ul>
<li><code>this.is.my.module</code></li>
<li><code>this.is</code></li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sub-configs"><code>Sub-Configs</code><a href="#sub-configs" class="hash-link" aria-label="Direct link to sub-configs" title="Direct link to sub-configs">​</a></h3>
<p><code>Sub-Configs</code> are a method for overriding one or more config options for specific files based on
filepath glob matching. Only certain config options are allowed to be overridden, and a need
to override other configs means you likely need to use a separate config file for your subdirectory.
You can have as many SubConfigs as you want in a project, and even multiple separate SubConfigs
that can apply to a given file when the <code>matches</code> glob pattern matches.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="subconfig-allowed-overrides"><strong>SubConfig Allowed Overrides</strong><a href="#subconfig-allowed-overrides" class="hash-link" aria-label="Direct link to subconfig-allowed-overrides" title="Direct link to subconfig-allowed-overrides">​</a></h4>
<p>We currently allow the following config options to be overridden in a SubConfig:</p>
<ul>
<li><code>errors</code></li>
<li><code>replace-imports-with-any</code></li>
<li><code>untyped-def-behavior</code></li>
<li><code>ignore-errors-in-generated-code</code></li>
</ul>
<p>All SubConfig overrides <em>replace</em> the values appearing in the &#x27;root&#x27; or top-level of the
Pyrefly configuration.</p>
<p>Any configs that change the list of files we&#x27;re type checking, Python environment, or where we look
for imports cannot be included in SubConfigs. Some other configs we also do not include because
we think they make it difficult to reason about your project type checks, but you can
<a href="https://github.com/facebook/pyrefly/issues" target="_blank" rel="noopener noreferrer">open an issue</a> or make a pull request if you disagree
and would like to see the option supported.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="subconfig-table-structure"><strong>SubConfig Table Structure</strong><a href="#subconfig-table-structure" class="hash-link" aria-label="Direct link to subconfig-table-structure" title="Direct link to subconfig-table-structure">​</a></h4>
<p>A SubConfig has two or more entries:</p>
<ul>
<li>a <code>matches</code> key, with a <a href="#filesystem-globbing">Filesystem Glob</a> detailing which files the config
applies to.</li>
<li>at least one of the <a href="#subconfig-allowed-overrides">SubConfig allowed overrides</a></li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="subconfig-option-selection"><strong>SubConfig Option Selection</strong><a href="#subconfig-option-selection" class="hash-link" aria-label="Direct link to subconfig-option-selection" title="Direct link to subconfig-option-selection">​</a></h4>
<p>Since you can have more than one SubConfig matching a file, we need to define a resolution order
to determine which SubConfig&#x27;s option should be selected. Pyrefly does this by filtering
SubConfigs whose <code>matches</code> does not match the given file, then takes the first non-null
value that can be found in the order the SubConfigs appear in your configuration.</p>
<p>If no SubConfigs match, or there are no non-null config options present, then we take
the value in the &#x27;root&#x27;/top-level Pyrefly config (or Pyrefly default if no value is specified).</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="subconfig-example"><strong>SubConfig Example</strong><a href="#subconfig-example" class="hash-link" aria-label="Direct link to subconfig-example" title="Direct link to subconfig-example">​</a></h4>
<p>For the following config, this how options would be resolved.</p>
<div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key property">replace-imports-with-any</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;sympy.*&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;*.series&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">ignore-errors-in-generated-code</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># disable `bad-assignment` and `invalid-argument` for the whole project</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token table class-name">errors</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">bad-assignment</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">invalid-argument</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token table class-name">sub-config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># apply this to `sub/project/tests/file.py`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">matches</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;sub/project/tests/file.py&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># any unittest imports will by typed as `typing.Any`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">replace-imports-with-any</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;unittest.*&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token table class-name">sub-config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># apply this config to all files in `sub/project`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">matches</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;sub/project/**&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># enable `assert-type` errors in `sub/project`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token table class-name">sub-config.errors</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">assert-type</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token table class-name">sub-config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># apply this config to all files in `sub`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">matches</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> &quot;sub/**`</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># disable `assert-type` errors in `sub`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token table class-name">sub-config.errors</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">assert-type</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token table class-name">sub-config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># apply this config to all files under `tests` dirs in `sub/`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">matches</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;sub/**/tests/**&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># any pytest imports will be typed as `typing.Any`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">replace-imports-with-any</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;pytest.*&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li><code>sub/project/tests/file.py</code>
<ul>
<li><code>replace-imports-with-any</code>: <code>[&quot;unittest.*&quot;]</code></li>
<li><code>errors</code>: <code>{assert-type = true}</code></li>
<li><code>ignore-errors-in-generated-code</code>: <code>true</code></li>
</ul>
</li>
<li><code>sub/project/tests/another_file.py</code>
<ul>
<li><code>replace-imports-with-any</code>: <code>[&quot;pytest.*&quot;]</code></li>
<li><code>errors</code>: <code>{assert-type = true}</code></li>
<li><code>ignore-errors-in-generated-code</code>: <code>true</code></li>
</ul>
</li>
<li><code>sub/project/non_test_file.py</code>
<ul>
<li><code>replace-imports-with-any</code>: <code>[&quot;sympy.*&quot;, &quot;*.series&quot;]</code></li>
<li><code>errors</code>: <code>{assert-type = true}</code></li>
<li><code>ignore-errors-in-generated-code</code>: <code>true</code></li>
</ul>
</li>
<li><code>sub/sub_file.py</code>
<ul>
<li><code>replace-imports-with-any</code>: <code>[&quot;sympy.*&quot;, &quot;*.series&quot;]</code></li>
<li><code>errors</code>: <code>{assert-type = false}</code></li>
<li><code>ignore-errors-in-generated-code</code>: <code>true</code></li>
</ul>
</li>
<li><code>top_level_file.py</code>
<ul>
<li><code>replace-imports-with-any</code>: <code>[&quot;sympy.*&quot;, &quot;*.series&quot;]</code></li>
<li><code>errors</code>: <code>{assert-type = true, bad-assignment = false, invalid-argument = false}</code></li>
<li><code>ignore-errors-in-generated-code</code>: <code>true</code></li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="conda-and-venv-support">Conda and Venv Support<a href="#conda-and-venv-support" class="hash-link" aria-label="Direct link to Conda and Venv Support" title="Direct link to Conda and Venv Support">​</a></h3>
<p>We plan on adding extra automatic support for <a href="https://github.com/facebook/pyrefly/issues/2" target="_blank" rel="noopener noreferrer">Conda</a>
and <a href="https://github.com/facebook/pyrefly/issues/1" target="_blank" rel="noopener noreferrer">Venv</a> at some point soon, but we haven&#x27;t made
it around to doing this yet. If you would like to import packages from these in the meantime,
you can follow the following steps.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="venv">Venv<a href="#venv" class="hash-link" aria-label="Direct link to Venv" title="Direct link to Venv">​</a></h3>
<p>If you have a venv set up locally, you can get Pyrefly working with it by having your venv sourced
in your shell (<code>source .venv/bin/activate</code>), and we will automatically pick up your installed packages. To pick
up your packages even when your environment isn&#x27;t sourced, you can add <code>.venv/bin/python3</code> (or
<code>&lt;path_to_venv&gt;/bin/python3</code>) to your Pyrefly configuration under
<a href="#python-interpreter-path"><code>python-interpreter-path</code></a> or pass it in with the <code>--python-interpreter-path</code> flag.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="conda">Conda<a href="#conda" class="hash-link" aria-label="Direct link to Conda" title="Direct link to Conda">​</a></h3>
<p>If you have conda set up locally, you can get Pyrefly working with it by having your Conda environment
sourced in your shell (<code>conda activate &lt;environment&gt;</code>), and we will automatically pick up your installed packages.
To pick up your packages even when your environment isn&#x27;t sourced, you can query your environment&#x27;s install
location with <code>conda env list</code>, and add <code>&lt;conda_environment_path&gt;/bin/python3</code> to your Pyrefly configuration
under <a href="#python-interpreter-path"><code>python-interpreter-path</code></a> or pass it in with the <code>--python-interpreter-path</code> flag.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="example-configurations">Example Configurations<a href="#example-configurations" class="hash-link" aria-label="Direct link to Example Configurations" title="Direct link to Example Configurations">​</a></h2>
<p>This section displays an example config showing the usage of all config options listed above to make creating
your own easier, and to give you an easy place to start.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="default-pyreflytoml">Default <code>pyrefly.toml</code><a href="#default-pyreflytoml" class="hash-link" aria-label="Direct link to default-pyreflytoml" title="Direct link to default-pyreflytoml">​</a></h3>
<p>This is a configuration with the Pyrefly defaults. If you have an
interpreter installed, some of these values may be overridden.</p>
<div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">###### configuring what to type check and where to import from</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># check all Python files under the containing directory</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">project-includes</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;**/*.py*&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># exclude some uninteresting files</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">project-excludes</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;**/node_modules&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;**/__pycache__&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;**/*venv/**&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;**/.[!/.]*/**&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># perform an upward search for `.gitignore`, `.ignore`, and `.git/info/exclude`, and</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># add those to `project-excludes` automatically</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">use-ignore-files</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># import project files from &quot;.&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">search-path</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;.&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># let Pyrefly try to guess your search path</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">disable-search-path-heuristics</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># do not include any third-party packages (except those provided by an interpreter)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">site-package-path</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">###### configuring your python environment</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># assume we&#x27;re running on linux, regardless of the actual current platform</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">python-platform</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;linux&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># assume the Python version we&#x27;re using is 3.13, without querying an interpreter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">python-version</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;3.13&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># is Pyrefly disallowed from querying for an interpreter to automatically determine your</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># `python-platform`, `python-version`, and extra entries to `site-package-path`?</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">skip-interpreter-query</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># query the default Python interpreter on your system, if installed and `python_platform`,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># `python-version`, or `site-package-path` are unset.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># python-interpreter-path = null # this is commented out because there are no `null` values in TOML</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#### configuring your type check settings</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># wildcards for which Pyrefly will unconditionally replace the import with `typing.Any`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">replace-imports-with-any</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># wildcards for which Pyrefly will replace the import with `typing.Any` if it can&#x27;t be found</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">ignore-missing-imports</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># should Pyrefly skip type checking if we find a generated file?</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">ignore-errors-in-generated-code</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># what should Pyrefly do when it encounters a function that is untyped?</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">untyped-def-behavior</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;check-and-infer-return-type&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># can Pyrefly recognize ignore directives other than `# pyrefly: ignore` and `# type: ignore`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">permissive-ignores</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token table class-name">errors</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># this is an empty table, meaning all errors are enabled by default</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># no `[[sub-config]]` entries are included, since there are none by default</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-pyreflytoml">Example <code>pyrefly.toml</code><a href="#example-pyreflytoml" class="hash-link" aria-label="Direct link to example-pyreflytoml" title="Direct link to example-pyreflytoml">​</a></h3>
<div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key property">project-includes</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;src&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">project-excludes</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;**/.[!/.]*&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;**/tests&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">search-path</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;src&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">site-package-path</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;venv/lib/python3.12/site-packages&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">python-platform</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;linux&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">python-version</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;3.12&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">python-interpreter-path</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;venv/bin/python3&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">replace-imports-with-any</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;sympy.*&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;*.series&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">ignore-errors-in-generated-code</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># disable `bad-assignment` and `invalid-argument` for the whole project</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token table class-name">errors</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">bad-assignment</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">invalid-argument</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token table class-name">sub-config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># apply this to `sub/project/tests/file.py`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">matches</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;sub/project/tests/file.py&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># any unittest imports will by typed as `typing.Any`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">replace-imports-with-any</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;unittest.*&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token table class-name">sub-config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># apply this config to all files in `sub/project`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">matches</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;sub/project/**&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># enable `assert-type` errors in `sub/project`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token table class-name">sub-config.errors</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">assert-type</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token boolean">true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-pyprojecttoml">Example <code>pyproject.toml</code><a href="#example-pyprojecttoml" class="hash-link" aria-label="Direct link to example-pyprojecttoml" title="Direct link to example-pyprojecttoml">​</a></h3>
<div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Pyrefly header</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token table class-name">tool.pyrefly</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#### configuring what to type check and where to import from</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">project-includes</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;src&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">project-excludes</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;**/.[!/.]*&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;**/tests&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">search-path</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;src&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">site-package-path</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;venv/lib/python3.12/site-packages&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#### configuring your python environment</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">python-platform</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;linux&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">python-version</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;3.12&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">python-interpreter-path</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;venv/bin/python3&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#### configuring your type check settings</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">replace-imports-with-any</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;sympy.*&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;*.series&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">ignore-errors-in-generated-code</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token table class-name">tool.pyrefly.errors</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">bad-assignment</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">invalid-argument</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token table class-name">tool.pyrefly.sub-config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># apply this config to all files in `sub/project`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">matches</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;sub/project/**&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># enable `assert-type` errors in `sub/project`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token table class-name">tool.pyrefly.sub-config.errors</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">assert-type</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token table class-name">tool.pyrefly.sub-config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># apply this config to all files in `sub`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">matches</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> &quot;sub/**`</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># disable `assert-type` errors in `sub/project`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token table class-name">tool.pyrefly.sub-config.errors</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key property">assert-type</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># other non-Pyrefly configs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="exit-codes">Exit Codes<a href="#exit-codes" class="hash-link" aria-label="Direct link to Exit Codes" title="Direct link to Exit Codes">​</a></h2>
<table><thead><tr><th>Code</th><th>Meaning</th></tr></thead><tbody><tr><td>0</td><td>Success - command completed without issues</td></tr><tr><td>1</td><td>User error - command completed but problems (e.g., type errors) were found</td></tr><tr><td>3</td><td>Infrastructure error - an error in the environment prevented the command from completing</td></tr><tr><td>101</td><td>Panic - Pyrefly encountered an internal error and crashed</td></tr></tbody></table></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/pyrefly/edit/main/website/docs/configuration.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/en/docs/installation/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Installation</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/en/docs/migrating-to-pyrefly/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Migration Guides</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#simple-configuration-example" class="table-of-contents__link toc-highlight">Simple Configuration Example</a></li><li><a href="#precedence-in-options" class="table-of-contents__link toc-highlight">Precedence in Options</a></li><li><a href="#type-checking-modes" class="table-of-contents__link toc-highlight">Type Checking Modes</a></li><li><a href="#configuration-finding" class="table-of-contents__link toc-highlight">Configuration Finding</a><ul><li><a href="#providing-a-config-in-single-file-mode" class="table-of-contents__link toc-highlight">Providing a Config in Single-File Mode</a></li></ul></li><li><a href="#configuration-options" class="table-of-contents__link toc-highlight">Configuration Options</a><ul><li><a href="#project-includes" class="table-of-contents__link toc-highlight"><code>project-includes</code></a></li><li><a href="#project-excludes" class="table-of-contents__link toc-highlight"><code>project-excludes</code></a></li><li><a href="#disable-project-excludes-heuristics" class="table-of-contents__link toc-highlight"><code>disable-project-excludes-heuristics</code></a></li><li><a href="#search-path" class="table-of-contents__link toc-highlight"><code>search-path</code></a></li><li><a href="#disable-search-path-heuristics" class="table-of-contents__link toc-highlight"><code>disable-search-path-heuristics</code></a></li><li><a href="#site-package-path" class="table-of-contents__link toc-highlight"><code>site-package-path</code></a></li><li><a href="#python-platform" class="table-of-contents__link toc-highlight"><code>python-platform</code></a></li><li><a href="#python-version" class="table-of-contents__link toc-highlight"><code>python-version</code></a></li><li><a href="#conda-environment" class="table-of-contents__link toc-highlight"><code>conda-environment</code></a></li><li><a href="#python-interpreter-path" class="table-of-contents__link toc-highlight"><code>python-interpreter-path</code></a></li><li><a href="#fallback-python-interpreter-name" class="table-of-contents__link toc-highlight"><code>fallback-python-interpreter-name</code></a></li><li><a href="#skip-interpreter-query" class="table-of-contents__link toc-highlight"><code>skip-interpreter-query</code></a></li><li><a href="#typeshed-path" class="table-of-contents__link toc-highlight"><code>typeshed-path</code></a></li><li><a href="#baseline" class="table-of-contents__link toc-highlight"><code>baseline</code></a></li><li><a href="#errors" class="table-of-contents__link toc-highlight"><code>errors</code></a></li><li><a href="#disable-type-errors-in-ide" class="table-of-contents__link toc-highlight"><code>disable-type-errors-in-ide</code></a></li><li><a href="#skip-lsp-config-indexing" class="table-of-contents__link toc-highlight"><code>skip-lsp-config-indexing</code></a></li><li><a href="#replace-imports-with-any" class="table-of-contents__link toc-highlight"><code>replace-imports-with-any</code></a></li><li><a href="#ignore-missing-imports" class="table-of-contents__link toc-highlight"><code>ignore-missing-imports</code></a></li><li><a href="#ignore-errors-in-generated-code" class="table-of-contents__link toc-highlight"><code>ignore-errors-in-generated-code</code></a></li><li><a href="#infer-with-first-use" class="table-of-contents__link toc-highlight"><code>infer-with-first-use</code></a></li><li><a href="#untyped-def-behavior" class="table-of-contents__link toc-highlight"><code>untyped-def-behavior</code></a></li><li><a href="#use-ignore-files" class="table-of-contents__link toc-highlight"><code>use-ignore-files</code></a></li><li><a href="#build-system" class="table-of-contents__link toc-highlight"><code>build-system</code></a></li><li><a href="#permissive-ignores" class="table-of-contents__link toc-highlight"><code>permissive-ignores</code></a></li><li><a href="#enabled-ignores" class="table-of-contents__link toc-highlight"><code>enabled-ignores</code></a></li><li><a href="#sub-config" class="table-of-contents__link toc-highlight"><code>sub-config</code></a></li><li><a href="#recursion-depth-limit" class="table-of-contents__link toc-highlight"><code>recursion-depth-limit</code></a></li><li><a href="#recursion-overflow-handler" class="table-of-contents__link toc-highlight"><code>recursion-overflow-handler</code></a></li></ul></li><li><a href="#configuration-details" class="table-of-contents__link toc-highlight">Configuration Details</a><ul><li><a href="#environment-autoconfiguration" class="table-of-contents__link toc-highlight">Environment Autoconfiguration</a></li><li><a href="#filesystem-globbing" class="table-of-contents__link toc-highlight">Filesystem Globbing</a></li><li><a href="#module-globbing" class="table-of-contents__link toc-highlight">Module Globbing</a></li><li><a href="#sub-configs" class="table-of-contents__link toc-highlight"><code>Sub-Configs</code></a></li><li><a href="#conda-and-venv-support" class="table-of-contents__link toc-highlight">Conda and Venv Support</a></li><li><a href="#venv" class="table-of-contents__link toc-highlight">Venv</a></li><li><a href="#conda" class="table-of-contents__link toc-highlight">Conda</a></li></ul></li><li><a href="#example-configurations" class="table-of-contents__link toc-highlight">Example Configurations</a><ul><li><a href="#default-pyreflytoml" class="table-of-contents__link toc-highlight">Default <code>pyrefly.toml</code></a></li><li><a href="#example-pyreflytoml" class="table-of-contents__link toc-highlight">Example <code>pyrefly.toml</code></a></li><li><a href="#example-pyprojecttoml" class="table-of-contents__link toc-highlight">Example <code>pyproject.toml</code></a></li></ul></li><li><a href="#exit-codes" class="table-of-contents__link toc-highlight">Exit Codes</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community &amp; Support</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/Cf7mFQtW7W" target="_blank" rel="noopener noreferrer" class="footer__link-item">Join Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/facebook/pyrefly" target="_blank" rel="noopener noreferrer" class="footer__link-item">Open a Github issue<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.gg/MuFSdD7uCr?event=1389635637090713672" target="_blank" rel="noopener noreferrer" class="footer__link-item">Attend Office Hours<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://opensource.facebook.com/legal/privacy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/terms/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/data-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Data Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/cookie-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cookie Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://opensource.fb.com/" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/img/meta_open_source_logo.svg" alt="Meta Open Source Logo" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/meta_open_source_logo.svg" alt="Meta Open Source Logo" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU"></a></div><div class="footer__copyright">Copyright © 2026 Meta Platforms, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>